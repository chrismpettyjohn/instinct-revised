"use strict";var e=require("tslib"),s=require("react/jsx-runtime"),i=require("reactstrap"),n=require("@instinct-prj/frontend"),a=require("react-toastify"),t=require("react"),r=require("wouter"),o=require("@uiw/react-md-editor"),d=require("@instinct-prj/interface"),c=require("react-color"),l=require("moment"),u=require("react-toggle"),v=require("lodash");function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=h(o),_=h(l),m=h(u);function x(i){var a=i.children,t=r.useLocation()[0];return s.jsxs(n.AdminLayout,e.__assign({permission:"websiteManageEmulator"},{children:[s.jsx(n.Jumbotron,e.__assign({style:{background:"#263238"},title:"Emulator Settings"},{children:s.jsx("p",{children:"Here you can update your website and update your SWFs, maintenance, etc."},void 0)}),void 0),s.jsx(n.Container,{children:s.jsx(n.Card,e.__assign({header:s.jsxs("ul",e.__assign({className:"nav nav-tabs"},{children:[s.jsx(r.Link,e.__assign({to:"/admin/emulator/settings"},{children:s.jsx("li",e.__assign({className:"/admin/emulator/settings"===t?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"wrench"},void 0)}),void 0)}),void 0),s.jsx(r.Link,e.__assign({to:"/admin/emulator/texts"},{children:s.jsx("li",e.__assign({className:"/admin/emulator/texts"===t?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"font"},void 0)}),void 0)}),void 0)]}),void 0)},{children:a}),void 0)},void 0)]}),void 0)}n.setURL("admin",s.jsx((function(){return s.jsxs(n.AdminLayout,e.__assign({permission:"websiteShowAdminPanel"},{children:[s.jsx(n.Jumbotron,e.__assign({style:{background:"#263238"},title:"Admin Panel"},{children:s.jsx("p",{children:"Welcome to the admin panel"},void 0)}),void 0),s.jsx(n.Container,{children:s.jsxs(n.Row,{children:[s.jsxs(i.Col,e.__assign({xs:6},{children:[s.jsx(n.Card,e.__assign({header:"Hotel Statistics"},{children:s.jsx("p",{children:"Coming soon"},void 0)}),void 0),s.jsx(n.Card,e.__assign({header:"Inspirational Video"},{children:s.jsx("iframe",{width:"100%",height:315,src:"https://www.youtube-nocookie.com/embed/_5lUSTmkM_0?controls=0&",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},void 0)}),void 0)]}),void 0),s.jsx(i.Col,e.__assign({xs:6},{children:s.jsx(n.Card,e.__assign({header:"Diagnostics"},{children:s.jsx("p",{children:"Coming soon"},void 0)}),void 0)}),void 0)]},void 0)},void 0)]}),void 0)}),{},void 0)),n.setURL("admin/emulator/settings",s.jsx((function(){var r=t.useState(!1),o=r[0],d=r[1],c=t.useState(""),l=c[0],u=c[1],v=t.useState(),h=v[0],g=v[1];function _(s,i){g((function(n){var a=e.__spreadArrays(n);return a.find((function(e){return e.id===s})).value=i,a}))}return t.useEffect((function(){!function(){e.__awaiter(this,void 0,void 0,(function(){var s;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,n.emulatorService.getSettings()];case 1:return s=e.sent(),g(s),[2]}}))}))}()}),[]),s.jsxs(x,{children:[s.jsxs("div",e.__assign({className:"row"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:s.jsxs("h2",{children:[s.jsx(n.Icon,{type:"wrench"},void 0),"Emulator Settings"]},void 0)}),void 0),s.jsxs("div",e.__assign({className:"col-6"},{children:[s.jsx("h4",{children:"Filter By"},void 0),s.jsx("input",{className:"form-control",value:l,onChange:function(e){return u(e.target.value.toLowerCase())}},void 0)]}),void 0)]}),void 0),s.jsxs(n.Form,e.__assign({className:"mt-2",onSubmit:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return d(!0),[4,n.emulatorService.updateSettings(h.map((function(e){return{id:e.id,value:e.value}})))];case 1:return e.sent(),a.toast.info("Emulator settings have been updated"),d(!1),[2]}}))}))}},{children:[s.jsx("h3",{children:"Server Options"},void 0),!h&&s.jsx(n.Icon,{className:"fa-spin",type:"spinner"},void 0),s.jsx("div",e.__assign({className:"row",style:{maxHeight:500,overflowY:"scroll"}},{children:null==h?void 0:h.filter((function(e){return e.label.toLowerCase().includes(l)})).map((function(a){return s.jsxs(i.FormGroup,e.__assign({className:"col-6"},{children:[s.jsx("h4",{children:a.label},void 0),s.jsx(n.Input,{type:"text",name:a.id,value:a.value,onChange:_},void 0)]}),a.id)}))}),void 0),s.jsx("div",e.__assign({className:"mt-5 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-success",disabled:o,type:"submit"},{children:o?s.jsx(n.Icon,{className:"fa-spin",type:"spinner"},void 0):s.jsx(s.Fragment,{children:"Save"},void 0)}),void 0)}),void 0)]}),void 0)]},void 0)}),{},void 0)),n.setURL("admin/emulator/texts",s.jsx((function(){var r=t.useState(!1),o=r[0],d=r[1],c=t.useState(""),l=c[0],u=c[1],v=t.useState(),h=v[0],g=v[1];function _(s,i){g((function(n){var a=e.__spreadArrays(n);return a.find((function(e){return e.id===s})).value=i,a}))}return t.useEffect((function(){!function(){e.__awaiter(this,void 0,void 0,(function(){var s;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,n.emulatorService.getTexts()];case 1:return s=e.sent(),g(s),[2]}}))}))}()}),[]),s.jsxs(x,{children:[s.jsxs("div",e.__assign({className:"row"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:s.jsxs("h2",{children:[s.jsx(n.Icon,{type:"wrench"},void 0),"Emulator Texts"]},void 0)}),void 0),s.jsxs("div",e.__assign({className:"col-6"},{children:[s.jsx("h4",{children:"Filter By"},void 0),s.jsx("input",{className:"form-control",value:l,onChange:function(e){return u(e.target.value.toLowerCase())}},void 0)]}),void 0)]}),void 0),s.jsxs(n.Form,e.__assign({className:"mt-2",onSubmit:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return d(!0),[4,n.emulatorService.updateTexts(h.map((function(e){return{id:e.id,value:e.value}})))];case 1:return e.sent(),a.toast.info("Emulator Texts have been updated"),d(!1),[2]}}))}))}},{children:[s.jsx("h3",{children:"Server Options"},void 0),!h&&s.jsx(n.Icon,{className:"fa-spin",type:"spinner"},void 0),s.jsx("div",e.__assign({className:"row",style:{maxHeight:500,overflowY:"scroll"}},{children:null==h?void 0:h.filter((function(e){return e.label.toLowerCase().includes(l)})).map((function(a){return s.jsxs(i.FormGroup,e.__assign({className:"col-6"},{children:[s.jsx("h4",{children:a.label},void 0),s.jsx(n.Input,{type:"text",name:a.id,value:a.value,onChange:_},void 0)]}),a.id)}))}),void 0),s.jsx("div",e.__assign({className:"mt-5 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-success",disabled:o,type:"submit"},{children:o?s.jsx(n.Icon,{className:"fa-spin",type:"spinner"},void 0):s.jsx(s.Fragment,{children:"Save"},void 0)}),void 0)}),void 0)]}),void 0)]},void 0)}),{},void 0));var j={article:d.exampleArticle,showSpinner:!1,showError:!1};function p(i){var o,d=i.defaultArticle,c=i.onSave,l=n.useFetchAllNewsCategories(),u=t.useState(e.__assign(e.__assign({},j),{article:null!=d?d:j.article})),v=u[0],h=u[1];function _(s,i){h((function(n){var a;return e.__assign(e.__assign({},n),((a={})[s]=i,a))}))}function m(e,s){var i;x(((i={})[e]=s,i))}function x(s){h((function(i){return e.__assign(e.__assign({},i),{article:e.__assign(e.__assign({},i.article),s)})}))}return s.jsxs(n.AdminLayout,e.__assign({permission:"websiteManageNews"},{children:[s.jsx(n.Jumbotron,e.__assign({style:{background:"#263238",backgroundImage:"url("+v.article.headerImage+")",backgroundSize:"100%"},title:v.article.title},{children:s.jsx("p",{children:v.article.description},void 0)}),void 0),s.jsxs(n.Container,{children:[s.jsx(r.Link,e.__assign({to:"/admin/news/articles"},{children:s.jsx(n.Icon,{className:"text-white fa-2x",type:"arrow-left"},void 0)}),void 0),s.jsx(n.Card,e.__assign({header:"Editor"},{children:s.jsxs(n.Form,e.__assign({className:"",onSubmit:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(s){switch(s.label){case 0:_("showSpinner",!0),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,c({title:v.article.title,content:v.article.content,description:v.article.description,categoryID:v.article.category.id,headerImage:v.article.headerImage,thumbnailImage:v.article.thumbnailImage})];case 2:return s.sent(),a.toast.success("Your changes have been saved"),_("showSpinner",!1),[3,4];case 3:return s.sent(),h((function(s){return e.__assign(e.__assign({},s),{showError:!0,showSpinner:!1})})),[3,4];case 4:return[2]}}))}))}},{children:[s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Title"},void 0),s.jsx(n.Input,{type:"text",name:"title",onChange:m,value:v.article.title},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Description"},void 0),s.jsx(n.Input,{type:"text",name:"description",onChange:m,value:v.article.description},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Category"},void 0),s.jsx(n.Skeleton,e.__assign({isLoading:void 0===l},{children:s.jsx(n.Select,{options:l,value:null!==(o=null==l?void 0:l.find((function(e){return e.id===v.article.category.id})))&&void 0!==o?o:null,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return""+e.id},onChange:function(e){return m("category",e)}},void 0)}),void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsxs("h4",{children:["Header",s.jsx("small",{children:s.jsx(n.PreviewImage,{className:"ml-2",image:v.article.headerImage},void 0)},void 0)]},void 0),s.jsx(n.Input,{type:"text",name:"headerImage",onChange:m,value:v.article.headerImage},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsxs("h4",{children:["Thumbnail",s.jsx("small",{children:s.jsx(n.PreviewImage,{className:"ml-2",image:v.article.thumbnailImage},void 0)},void 0)]},void 0),s.jsx(n.Input,{type:"text",name:"thumbnailImage",onChange:m,value:v.article.thumbnailImage},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3"},{children:[s.jsx("h4",{children:"Content"},void 0),s.jsx(g.default,{value:v.article.content,onChange:function(e){return x({content:e})}},void 0)]}),void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:" "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-primary",disabled:v.showSpinner},{children:v.showSpinner?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)]},void 0)]}),void 0)}function f(i){var a=i.children,t=r.useLocation()[0];return s.jsxs(n.AdminLayout,e.__assign({permission:"websiteManageNews"},{children:[s.jsx(n.Jumbotron,e.__assign({style:{background:"#263238"},title:"Hotel ListArticles"},{children:s.jsx("p",{children:"Manage your hotel's articles."},void 0)}),void 0),s.jsx(n.Container,{children:s.jsx(n.Card,e.__assign({header:s.jsxs("ul",e.__assign({className:"nav nav-tabs"},{children:[s.jsx(r.Link,e.__assign({to:"/admin/news/articles"},{children:s.jsx("li",e.__assign({className:"/admin/list-articles/articles"===t?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"newspaper"},void 0)}),void 0)}),void 0),s.jsx(r.Link,e.__assign({to:"/admin/news/categories"},{children:s.jsx("li",e.__assign({className:"/admin/list-articles/categories"===t?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"comments"},void 0)}),void 0)}),void 0)]}),void 0)},{children:a}),void 0)},void 0)]}),void 0)}function b(r){var o=r.onCreation,l=t.useState(!1),u=l[0],v=l[1],h=t.useState(d.exampleArticleCategoryDTO),g=h[0],_=h[1];function m(s,i){_((function(n){var a;return e.__assign(e.__assign({},n),((a={})[s]=i,a))}))}function x(){v((function(e){return!e}))}return s.jsxs(s.Fragment,{children:[s.jsxs("button",e.__assign({className:"btn btn-primary mt-2",onClick:x},{children:[s.jsx("i",{className:"fa fa-plus-square mr-2"},void 0),"New"]}),void 0),s.jsxs(i.Modal,e.__assign({isOpen:u,onToggle:x},{children:[s.jsx(i.ModalHeader,e.__assign({toggle:x},{children:"Create Category"}),void 0),s.jsxs(n.Form,e.__assign({className:"",onSubmit:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.articleService.createCategory(g.name,g.color)];case 1:return e.sent(),_(d.exampleArticleCategoryDTO),v(!1),a.toast.success("Category "+g.name+" has been created"),o(),[3,3];case 2:return e.sent(),a.toast.error("Category "+g.name+" could not be created at this time"),[3,3];case 3:return[2]}}))}))}},{children:[s.jsxs(i.ModalBody,{children:[s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Name"},void 0),s.jsx(n.Input,{type:"text",name:"name",value:g.name,onChange:m},void 0)]},void 0),s.jsx(i.FormGroup,{},void 0),s.jsx("h4",{children:"Color"},void 0),s.jsx(c.SketchPicker,{color:g.color,onChange:function(e){return m("color",e.hex)}},void 0)]},void 0),s.jsx(i.ModalFooter,{children:s.jsx("button",e.__assign({className:"btn btn-success",type:"submit"},{children:"Save"}),void 0)},void 0)]}),void 0)]}),void 0)]},void 0)}n.setURL("admin/list-articles/articles/create",s.jsx((function(){var i=r.useLocation();i[0];var t=i[1];return s.jsx(p,{onSave:function(s){return e.__awaiter(this,void 0,void 0,(function(){var i;return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.articleService.create(s)];case 1:return i=e.sent(),a.toast.success(s.title+" has been published successfully"),t("/admin/news/articles/"+i.id),[3,3];case 2:return e.sent(),a.toast.error(s.title+" could not be published at this time"),[3,3];case 3:return[2]}}))}))}},void 0)}),{},void 0)),n.setURL("admin/list-articles/articles/:articleID",s.jsx((function(){var i=r.useRoute("/admin/list-articles/articles/:articleID");i[0];var t=i[1],o=n.useFetchArticleByID(t.articleID);if(!o)return s.jsx("i",{className:"fa fa-spin fa-spinner"},void 0);return s.jsx(p,{defaultArticle:o,onSave:function(s){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.articleService.updateByID(t.articleID,s)];case 1:return e.sent(),a.toast.success("Your changes to "+s.title+" have been published"),[3,3];case 2:return e.sent(),a.toast.error("Your changes to "+s.title+" could not be saved at this time"),[3,3];case 3:return[2]}}))}))}},void 0)}),{},void 0)),n.setURL("admin/list-articles/articles",s.jsx((function(){var i=t.useState(0),o=i[0],d=i[1];return s.jsxs(f,{children:[s.jsxs("div",e.__assign({className:"row"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:s.jsx("h2",e.__assign({style:{marginTop:8}},{children:"News Articles"}),void 0)}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx(r.Link,e.__assign({to:"/admin/news/articles/create"},{children:s.jsxs("button",e.__assign({className:"btn btn-primary mt-2"},{children:[s.jsx("i",{className:"fa fa-plus-square mr-2"},void 0),"New"]}),void 0)}),void 0)}),void 0)]}),void 0),s.jsx(n.APIWrapper,e.__assign({params:o,promise:n.articleService.getAll},{children:function(i){return s.jsx("div",e.__assign({style:{maxHeight:600,overflowY:"scroll",padding:10}},{children:i.map((function(i){return s.jsxs("div",e.__assign({className:"admin-article row mb-2"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:s.jsx(r.Link,e.__assign({to:"/admin/news/articles/"+i.id},{children:s.jsx("img",{alt:"article header",src:i.thumbnailImage,height:100},void 0)}),void 0)}),void 0),s.jsxs("div",e.__assign({className:"col-6 text-right"},{children:[s.jsx(r.Link,e.__assign({to:"/admin/news/articles/"+i.id},{children:s.jsx("h3",{children:i.title},void 0)}),void 0),s.jsx("div",e.__assign({onClick:function(){return function(s){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.articleService.deleteByID(s)];case 1:return e.sent(),d((function(e){return e+1})),a.toast.success("Article "+s+" has been deleted"),[3,3];case 2:return e.sent(),a.toast.error("Article "+s+" could not be deleted at this time"),[3,3];case 3:return[2]}}))}))}(i.id)},style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"text-danger",type:"trash"},void 0)}),void 0)]}),void 0)]}),i.id)}))}),void 0)}}),void 0)]},void 0)}),{},void 0)),n.setURL("admin/list-articles/categories",s.jsx((function(){var i=t.useState(0),r=i[0],o=i[1];return s.jsxs(f,{children:[s.jsxs("div",e.__assign({className:"row"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:s.jsx("h2",e.__assign({style:{marginTop:8}},{children:"News Categories"}),void 0)}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx(b,{onCreation:function(){o((function(e){return e+1}))}},void 0)}),void 0)]}),void 0),s.jsx(n.APIWrapper,e.__assign({promise:n.articleService.getAllCategories,params:r},{children:function(i){return s.jsx("div",e.__assign({className:"row",style:{maxHeight:500,padding:15}},{children:null==i?void 0:i.map((function(i){return s.jsxs("div",e.__assign({className:"col-12",style:{background:"#000B13",borderBottom:"2px solid "+i.color,padding:15,marginBottom:15}},{children:[s.jsx("h3",{children:i.name},void 0),s.jsx("button",e.__assign({className:"btn btn-danger",onClick:function(){return function(s){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.articleService.deleteCategoryByID(s)];case 1:return e.sent(),a.toast.success("Category "+s+" has been deleted"),o((function(e){return e+1})),[3,3];case 2:return e.sent(),a.toast.error("Category "+s+" could not be deleted at this time"),[3,3];case 3:return[2]}}))}))}(i.id)}},{children:"Delete"}),void 0)]}),i.id)}))}),void 0)}}),void 0)]},void 0)}),{},void 0));var w={userID:0,reason:"",banStart:0,banEnd:0},N={ban:w,user:void 0,showModal:!1,showError:!1,showSpinner:!1};function y(a){var r,o=a.children,d=a.defaultBan,c=void 0===d?w:d,l=a.onSave,u=t.useContext(n.sessionContext),v=t.useState(""),h=v[0],g=v[1],_=t.useState(e.__assign(e.__assign({},N),{ban:e.__assign(e.__assign({},c),{userID:u.user.id})})),m=_[0],x=_[1];function j(s,i){x((function(n){var a;return e.__assign(e.__assign({},n),((a={})[s]=i,a))}))}function p(s,i){x((function(n){var a;return e.__assign(e.__assign({},n),{ban:e.__assign(e.__assign({},n.ban),(a={},a[s]=i,a))})}))}function f(){x((function(s){return e.__assign(e.__assign({},s),{showModal:!s.showModal})}))}return t.useEffect((function(){!function(s){e.__awaiter(this,void 0,void 0,(function(){var i;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,n.userService.getByID(s)];case 1:return i=e.sent(),g(i.username),[2]}}))}))}(m.ban.userID)}),[m.ban.userID]),t.useEffect((function(){!function(s){e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,n.userService.getByID(s)];case 1:return j("user",e.sent()),[2]}}))}))}(m.ban.userID)}),[m.ban.userID]),t.useEffect((function(){!function(s){e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,n.userService.getByUsername(s)];case 1:return p("userID",e.sent().user.id),[2]}}))}))}(h)}),[h]),s.jsxs(s.Fragment,{children:[s.jsx("div",e.__assign({onClick:f},{children:o}),void 0),s.jsxs(i.Modal,e.__assign({isOpen:m.showModal,toggle:f},{children:[s.jsx(i.ModalHeader,e.__assign({toggle:f},{children:"Ban Editor"}),void 0),s.jsx(i.ModalBody,{children:s.jsxs(n.Form,e.__assign({className:"",onSubmit:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(s){switch(s.label){case 0:j("showSpinner",!0),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,l(m.ban)];case 2:return s.sent(),j("showSpinner",!1),[3,4];case 3:return s.sent(),x((function(s){return e.__assign(e.__assign({},s),{showError:!0,showSpinner:!1})})),[3,4];case 4:return[2]}}))}))}},{children:[s.jsxs("div",e.__assign({className:"row mt-3",style:{padding:2}},{children:[s.jsxs("div",e.__assign({className:"col-8"},{children:[s.jsx("h4",{children:"Username"},void 0),s.jsx("input",{className:"form-control",type:"text",value:h,onChange:function(e){return g(e.target.value)}},void 0)]}),void 0),s.jsx("div",e.__assign({className:"col-4"},{children:s.jsx(n.Avatar,{className:"mt-2",look:null===(r=m.user)||void 0===r?void 0:r.figure,headOnly:!0},void 0)}),void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Reason"},void 0),s.jsx("textarea",{className:"form-control",rows:3,value:m.ban.reason,onChange:function(e){return p("reason",e.target.value)}},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Start Date"},void 0),s.jsx(n.DatePicker,{defaultTimestamp:m.ban.banStart,onChange:function(e){return p("banStart",e)}},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"End Date"},void 0),s.jsx(n.DatePicker,{defaultTimestamp:m.ban.banEnd,onChange:function(e){return p("banEnd",e)}},void 0)]}),void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:"  "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-success",disabled:m.showSpinner},{children:m.showSpinner?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)},void 0)]}),void 0)]},void 0)}function S(r){var o=r.ban,d=r.children,c=r.onDeletion,l=t.useState(!1),u=l[0],v=l[1],h=t.useState(!1),g=h[0],_=h[1];function m(){v((function(e){return!e}))}return s.jsxs(s.Fragment,{children:[s.jsx("div",e.__assign({onClick:m},{children:d}),void 0),s.jsxs(i.Modal,e.__assign({isOpen:u,toggle:m},{children:[s.jsx(i.ModalHeader,e.__assign({toggle:m},{children:"Are you sure?"}),void 0),s.jsxs(i.ModalBody,e.__assign({className:"text-center"},{children:[s.jsx("i",{className:"fa fa-exclamation-triangle fa-3x text-danger"},void 0),s.jsx("h3",e.__assign({className:"text-uppercase"},{children:"Warning"}),void 0),s.jsxs("h4",{children:["You're about to unban ",s.jsx("b",{children:o.user.username},void 0)]},void 0),s.jsx("p",{children:"This action is irreversible and your changes cannot be undone."},void 0)]}),void 0),s.jsx(i.ModalFooter,{children:s.jsx("div",e.__assign({className:"row"},{children:s.jsx("div",e.__assign({className:"col-6"},{children:s.jsx("button",e.__assign({className:"btn btn-danger",disabled:g,onClick:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),_(!0),[4,n.banService.deleteByID(o.id.toString())];case 1:return e.sent(),a.toast.success(o.user.username+" has been unbanned"),c(),[3,3];case 2:return e.sent(),a.toast.error(o.user.username+" could not be unbanned at this time"),[3,3];case 3:return[2]}}))}))}},{children:g?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Delete"}),void 0)}),void 0)}),void 0)},void 0)]}),void 0)]},void 0)}function C(i){var t=i.ban,r=i.onChange,o={userID:t.user.id,reason:t.banReason,banStart:t.banStart,banEnd:t.banEnd};return s.jsxs("div",e.__assign({className:"admin-article row mb-3",style:{height:100,width:"100%"}},{children:[s.jsx("div",e.__assign({className:"col-2"},{children:s.jsx(n.Avatar,{look:t.user.figure,headOnly:!0},void 0)}),void 0),s.jsxs("div",e.__assign({className:"col-10 text-right"},{children:[s.jsx("h3",{children:t.user.username},void 0),s.jsxs("h5",e.__assign({style:{marginTop:-10}},{children:[s.jsx("b",e.__assign({style:{fontWeight:"bold"}},{children:"Ban Expires:"}),void 0)," ",_.default.unix(t.banEnd).format("MM/DD/YYYY (hh:mmA)")]}),void 0),s.jsxs("div",e.__assign({className:"row mr-2",style:{float:"right"}},{children:[s.jsx(S,e.__assign({ban:t,onDeletion:r},{children:s.jsx("button",e.__assign({className:"btn btn-danger btn-sm mr-2"},{children:s.jsx("i",{className:"fa fa-trash"},void 0)}),void 0)}),void 0),s.jsx(y,e.__assign({defaultBan:o,onSave:function(s){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.banService.updateByID(t.id.toString(),s)];case 1:return e.sent(),a.toast.success("You have updated the ban on "+t.user.username),r(),[3,3];case 2:return e.sent(),a.toast.error("User "+s.userID+"'s ban could not be updated at this time"),[3,3];case 3:return[2]}}))}))}},{children:s.jsx("button",e.__assign({className:"btn btn-primary btn-sm"},{children:s.jsx("i",{className:"fa fa-pencil"},void 0)}),void 0)}),void 0)]}),void 0)]}),void 0)]}),t.id)}function k(i){var a=i.children,t=i.permission,o=r.useLocation()[0];return s.jsxs(n.AdminLayout,e.__assign({permission:"websiteShowAdminPanel"},{children:[s.jsx(n.Jumbotron,e.__assign({style:{background:"#263238"},title:"Website Settings"},{children:s.jsx("p",{children:"Here you can update your website and update your SWFs, maintenance, etc."},void 0)}),void 0),s.jsx(n.Container,{children:s.jsx(n.Card,e.__assign({header:s.jsxs("ul",e.__assign({className:"nav nav-tabs"},{children:[s.jsx(n.PermissionGuard,e.__assign({permission:t,redirect:!1},{children:s.jsx(r.Link,e.__assign({to:"/admin/users"},{children:s.jsx("li",e.__assign({className:"/admin/users"===o?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"users"},void 0)}),void 0)}),void 0)}),void 0),s.jsx(n.PermissionGuard,e.__assign({permission:"websiteManageRanks",redirect:!1},{children:s.jsx(r.Link,e.__assign({to:"/admin/users/ranks"},{children:s.jsx("li",e.__assign({className:"/admin/users/ranks"===o?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"users-class"},void 0)}),void 0)}),void 0)}),void 0),s.jsx(n.PermissionGuard,e.__assign({permission:"websiteManageBans",redirect:!1},{children:s.jsx(r.Link,e.__assign({to:"/admin/users/bans"},{children:s.jsx("li",e.__assign({className:"/admin/users/bans"===o?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"ban"},void 0)}),void 0)}),void 0)}),void 0),s.jsx(n.PermissionGuard,e.__assign({permission:"websiteManageBetaCodes",redirect:!1},{children:s.jsx(r.Link,e.__assign({to:"/admin/users/beta-codes"},{children:s.jsx("li",e.__assign({className:"/admin/users/beta-codes"===o?"nav-link active":"nav-link",style:{cursor:"pointer"}},{children:s.jsx(n.Icon,{className:"mr-0",type:"vial"},void 0)}),void 0)}),void 0)}),void 0)]}),void 0)},{children:a}),void 0)},void 0)]}),void 0)}n.setURL("admin/users/bans",s.jsx((function(){var i=t.useState(""),a=i[0],r=i[1],o=t.useState(0),d=o[0],c=o[1];function l(){c((function(e){return e+1}))}return s.jsxs(k,e.__assign({permission:"websiteManageBans"},{children:[s.jsx("h2",{children:"Bans"},void 0),s.jsx("div",e.__assign({className:"row mb-2"},{children:s.jsx("div",e.__assign({className:"container",style:{width:"98%"}},{children:s.jsx("input",{className:"form-control",placeholder:"Filter by...",onChange:function(e){return r(e.target.value)},value:a},void 0)}),void 0)}),void 0),s.jsx(n.APIWrapper,e.__assign({promise:n.banService.getAll,params:d},{children:function(i){var n=i.filter((function(e){return e.user.username.includes(a)}));return s.jsx(s.Fragment,{children:s.jsx("div",e.__assign({className:"row",style:{overflowY:"scroll",maxHeight:600,padding:10}},{children:n.map((function(i){return s.jsx("div",e.__assign({className:"col-lg-6"},{children:s.jsx(C,{ban:i,onChange:l},void 0)}),i.id)}))}),void 0)},void 0)}}),void 0)]}),void 0)}),{},void 0)),n.setURL("admin/users/beta-codes",s.jsx((function(){var i=t.useState(0),r=i[0],o=i[1],d=n.useFetchBetaCodes(r);return s.jsx(k,e.__assign({permission:"websiteManageBetaCodes"},{children:s.jsxs("div",e.__assign({style:{padding:5}},{children:[s.jsx("h2",e.__assign({className:"aside-title"},{children:s.jsxs("div",e.__assign({className:"row"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:s.jsx("div",{children:"Beta Codes"},void 0)}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsxs("button",e.__assign({className:"btn btn-success",onClick:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.betaCodeService.create()];case 1:return e.sent(),o((function(e){return e+1})),a.toast.success("A new beta code has been generated"),[3,3];case 2:return e.sent(),a.toast.error("A beta code could not be generated at this time"),[3,3];case 3:return[2]}}))}))}},{children:[s.jsx("i",{className:"fa fa-plus-square mr-2"},void 0),"New"]}),void 0)}),void 0)]}),void 0)}),void 0),s.jsxs("div",e.__assign({className:"alert-warning p-3"},{children:[s.jsx("b",{children:"Warning:"},void 0),s.jsx("p",{children:"Deleting a beta code will revoke access for the redeeming user, if any.."},void 0)]}),void 0),s.jsxs("table",e.__assign({className:"table"},{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",e.__assign({scope:"col"},{children:"Beta Code"}),void 0),s.jsx("th",e.__assign({scope:"col"},{children:"Redeemed By"}),void 0),s.jsx("th",e.__assign({scope:"col"},{children:" "}),void 0)]},void 0)},void 0),s.jsx("tbody",{children:null==d?void 0:d.map((function(i){var t;return s.jsxs("tr",{children:[s.jsx("th",{children:i.code},void 0),s.jsx("td",{children:null===(t=i.user)||void 0===t?void 0:t.username},void 0),s.jsx("td",{children:s.jsx("div",e.__assign({style:{cursor:"pointer"},onClick:function(){return function(s){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.betaCodeService.delete(s)];case 1:return e.sent(),o((function(e){return e+1})),a.toast.success("Beta code has been deleted"),[3,3];case 2:return e.sent(),a.toast.error("Beta code "+s+" could not be deleted at this time"),[3,3];case 3:return[2]}}))}))}(i.code)}},{children:s.jsx(n.Icon,{className:"text-danger",type:"trash-alt"},void 0)}),void 0)},void 0)]},i.code)}))},void 0)]}),void 0)]}),void 0)}),void 0)}),{},void 0));var I={name:"",badge:"ADM",level:1,websiteAdminClient:!1,websiteShowStaff:!1,websiteShowAdminPanel:!1,websiteManageRanks:!1,websiteManageUsers:!1,websiteManageNews:!1,websiteManageBans:!1,websiteManageConfig:!1,websiteManageBetaCodes:!1,websiteManageGuestbook:!1,websiteManageEmulator:!1,users:[]},F={rank:I,showModal:!1,showError:!1,showSpinner:!1};function M(a){var r=a.children,o=a.defaultRank,d=void 0===o?I:o,c=a.onSave,l=t.useContext(n.configContext).config,u=t.useState(e.__assign(e.__assign({},F),{rank:d})),v=u[0],h=u[1];function g(s,i){h((function(n){var a;return e.__assign(e.__assign({},n),((a={})[s]=i,a))}))}function _(s,i){h((function(n){var a;return e.__assign(e.__assign({},n),{rank:e.__assign(e.__assign({},n.rank),(a={},a[s]=i,a))})}))}function x(){h((function(s){return e.__assign(e.__assign({},s),{showModal:!s.showModal})}))}var j={websiteAdminClient:"Admin Client",websiteShowStaff:"Show as Staff",websiteShowAdminPanel:"Use Admin Panel",websiteManageEmulator:"Manage Emulator",websiteManageNews:"Manage ListArticles",websiteManageRanks:"Manage Ranks",websiteManageUsers:"Manage Users",websiteManageBans:"Manage Bans",websiteManageConfig:"Manage Config",websiteManageBetaCodes:"Manage Beta Codes",websiteManageGuestbook:"Manage Guestbook"},p=Object.keys(j);return s.jsxs(s.Fragment,{children:[s.jsx("div",e.__assign({onClick:x},{children:r}),void 0),s.jsxs(i.Modal,e.__assign({isOpen:v.showModal,toggle:x},{children:[s.jsx(i.ModalHeader,e.__assign({toggle:x},{children:"Rank Editor"}),void 0),s.jsx(i.ModalBody,{children:s.jsxs(n.Form,e.__assign({className:"",onSubmit:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(s){switch(s.label){case 0:g("showSpinner",!0),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,c(v.rank)];case 2:return s.sent(),g("showSpinner",!1),[3,4];case 3:return s.sent(),h((function(s){return e.__assign(e.__assign({},s),{showError:!0,showSpinner:!1})})),[3,4];case 4:return[2]}}))}))}},{children:[s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Name"},void 0),s.jsx(n.Input,{type:"text",name:"name",onChange:_,value:v.rank.name},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3 row",style:{padding:2}},{children:[s.jsxs("div",e.__assign({className:"col-8"},{children:[s.jsx("h4",{children:"Badge"},void 0),s.jsx(n.Input,{type:"text",name:"badge",onChange:_,value:v.rank.badge},void 0)]}),void 0),s.jsx("div",e.__assign({className:"col-4"},{children:s.jsx("div",e.__assign({style:{background:"#001726",borderRadius:"50%",marginTop:30,padding:5,height:45,width:45,textAlign:"center"}},{children:s.jsx("img",{alt:"rank badge",src:l.swfBadgeURL+"/"+v.rank.badge+".gif"},void 0)}),void 0)}),void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Permissions"},void 0),s.jsx("div",e.__assign({className:"row"},{children:p.map((function(i){return s.jsx("div",e.__assign({className:"col-lg-6"},{children:s.jsxs("div",e.__assign({className:"row"},{children:[s.jsx("div",e.__assign({className:"col-2"},{children:s.jsx(m.default,{checked:v.rank[i],onChange:function(){return _(i,!v.rank[i])}},void 0)}),void 0),s.jsx("div",e.__assign({className:"col-10 text-right"},{children:j[i]}),void 0)]}),void 0)}),i)}))}),void 0)]}),void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:"  "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-success",disabled:v.showSpinner},{children:v.showSpinner?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)},void 0)]}),void 0)]},void 0)}function A(r){var o=r.children,d=r.rankID,c=r.rankName,l=r.onDeletion,u=t.useState(!1),v=u[0],h=u[1],g=t.useState(!1),_=g[0],m=g[1];function x(){h((function(e){return!e}))}return s.jsxs(s.Fragment,{children:[s.jsx("div",e.__assign({onClick:x},{children:o}),void 0),s.jsxs(i.Modal,e.__assign({isOpen:v,toggle:x},{children:[s.jsx(i.ModalHeader,e.__assign({toggle:x},{children:"Are you sure?"}),void 0),s.jsxs(i.ModalBody,e.__assign({className:"text-center"},{children:[s.jsx("i",{className:"fa fa-exclamation-triangle fa-3x text-danger"},void 0),s.jsx("h3",e.__assign({className:"text-uppercase"},{children:"Warning"}),void 0),s.jsxs("h4",{children:["You're about to delete ",s.jsx("b",{children:c},void 0)]},void 0),s.jsx("p",{children:"This action is irreversible and your changes cannot be undone."},void 0)]}),void 0),s.jsx(i.ModalFooter,{children:s.jsx("div",e.__assign({className:"row"},{children:s.jsx("div",e.__assign({className:"col-6"},{children:s.jsx("button",e.__assign({className:"btn btn-danger",disabled:_,onClick:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),m(!0),[4,n.rankService.deleteByID(d.toString())];case 1:return e.sent(),a.toast.success("Rank "+c+" has been deleted"),l(),[3,4];case 2:return e.sent(),a.toast.error("Rank "+c+" could not be deleted at this time"),[3,4];case 3:return m(!1),[7];case 4:return[2]}}))}))}},{children:_?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Delete"}),void 0)}),void 0)}),void 0)},void 0)]}),void 0)]},void 0)}function B(i){var r=i.rank,o=i.onChanges,c=t.useContext(n.configContext).config;return s.jsxs("div",e.__assign({className:"admin-article row mb-3",style:{height:100,width:"100%"}},{children:[s.jsx("div",e.__assign({className:"col-4"},{children:s.jsx("img",{alt:"rank badge",src:c.swfBadgeURL+"/"+r.badge+".gif",style:{marginTop:"20%"}},void 0)}),void 0),s.jsxs("div",e.__assign({className:"col-8 text-right"},{children:[s.jsx("h3",{children:r.name},void 0),s.jsxs("div",e.__assign({className:"row mr-2",style:{float:"right"}},{children:[s.jsx(A,e.__assign({rankID:r.id,rankName:r.name,onDeletion:o},{children:s.jsx("button",e.__assign({className:"btn btn-danger btn-sm mr-2"},{children:s.jsx("i",{className:"fa fa-trash"},void 0)}),void 0)}),void 0),s.jsx(M,e.__assign({defaultRank:d.rankWireToRankDTO(r),onSave:function(s){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.rankService.updateByID(r.id.toString(),s)];case 1:return e.sent(),a.toast.success("Rank "+s.name+" has been updated"),o(),[3,3];case 2:return e.sent(),a.toast.error("Rank "+s.name+" could not be updated at this time"),[3,3];case 3:return[2]}}))}))}},{children:s.jsx("button",e.__assign({className:"btn btn-primary btn-sm"},{children:s.jsx("i",{className:"fa fa-pencil"},void 0)}),void 0)}),void 0)]}),void 0)]}),void 0)]}),r.id)}function D(r){var o,d=r.user,c=r.onUpdated,l=n.useFetchAllRanks(),u=t.useState(e.__assign(e.__assign({},v.omit(d,"joinDate","lastLoginDate")),{password:"",userOfTheWeek:d.userOfTheWeek?1:0})),h=u[0],g=u[1],_=t.useState(!1),m=_[0],x=_[1],j=t.useState(!1),p=j[0],f=j[1];function b(s,i){g((function(n){var a;return e.__assign(e.__assign({},n),((a={})[s]=i,a))}))}function w(){f((function(e){return!e})),x(!1)}return s.jsxs(s.Fragment,{children:[s.jsxs("div",e.__assign({className:"admin-article row mb-3",style:{height:100,width:"100%"}},{children:[s.jsx("div",e.__assign({className:"col-4"},{children:s.jsx(n.Avatar,{look:h.figure,headOnly:!0},void 0)}),void 0),s.jsxs("div",e.__assign({className:"col-8 text-right"},{children:[s.jsx("h3",{children:h.username},void 0),s.jsx("div",e.__assign({className:"row mr-2",style:{float:"right"}},{children:s.jsxs("button",e.__assign({className:"btn btn-info",onClick:w},{children:[s.jsx(n.Icon,{type:"pencil"},void 0),"Edit"]}),void 0)}),void 0)]}),void 0)]}),void 0),s.jsxs(i.Modal,e.__assign({isOpen:p,toggle:w},{children:[s.jsx(i.ModalHeader,e.__assign({toggle:w},{children:"Edit User"}),void 0),s.jsxs(n.Form,e.__assign({className:"",onSubmit:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,n.manageUsersService.update(d.id,h)];case 1:return e.sent(),a.toast.info(h.username+"'s account has been updated"),f(!1),c(),[2]}}))}))}},{children:[s.jsxs(i.ModalBody,{children:[s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Username"},void 0),s.jsx(n.Input,{type:"text",name:"username",value:h.username,onChange:b},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Email"},void 0),s.jsx(n.Input,{type:"email",name:"email",value:h.email,onChange:b},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Password"},void 0),s.jsx(n.Input,{type:"password",name:"password",value:h.password,onChange:b},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Rank"},void 0),!l&&s.jsx(n.Icon,{className:"fa-spin",type:"spinner"},void 0),l&&s.jsx(n.Select,{options:l,value:null!==(o=l.find((function(e){return e.id===h.rankID})))&&void 0!==o?o:null,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:function(e){return b("rankID",e.id)}},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Figure"},void 0),s.jsx(n.Input,{type:"text",name:"figure",value:h.figure,onChange:b},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Credits"},void 0),s.jsx(n.Input,{type:"number",name:"credits",value:h.credits,onChange:b},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Pixels"},void 0),s.jsx(n.Input,{type:"number",name:"pixels",value:h.pixels,onChange:b},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("label",{children:"Points"},void 0),s.jsx(n.Input,{type:"number",name:"points",value:h.points,onChange:b},void 0)]},void 0)]},void 0),s.jsx(i.ModalFooter,{children:s.jsxs("div",e.__assign({className:"row w-100"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:s.jsx("button",e.__assign({className:"btn btn-danger",onClick:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return m?[4,n.manageUsersService.delete(d.id)]:(x((function(e){return!e})),[2]);case 1:return e.sent(),a.toast.info(d.username+"'s account has been deleted"),c(),[2]}}))}))},type:"button"},{children:m?s.jsx(s.Fragment,{children:"Are you sure?"},void 0):s.jsx(s.Fragment,{children:"Delete Account"},void 0)}),void 0)}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-success",type:"submit"},{children:"Save"}),void 0)}),void 0)]}),void 0)},void 0)]}),void 0)]}),void 0)]},void 0)}n.setURL("admin/users/ranks",s.jsx((function(){var i=t.useState(""),a=i[0],r=i[1],o=t.useState(1),d=o[0],c=o[1];return s.jsxs(k,e.__assign({permission:"websiteManageRanks"},{children:[s.jsx("h2",{children:"Ranks"},void 0),s.jsx("div",e.__assign({className:"row mb-2"},{children:s.jsx("div",e.__assign({className:"container",style:{width:"98%"}},{children:s.jsx("input",{className:"form-control",placeholder:"Filter by...",onChange:function(e){return r(e.target.value)},value:a},void 0)}),void 0)}),void 0),s.jsx("div",e.__assign({className:"row",style:{overflowY:"scroll",maxHeight:600,padding:10}},{children:s.jsx(n.APIWrapper,e.__assign({promise:n.rankService.getAll,params:d},{children:function(i){return s.jsx("div",e.__assign({className:"row",style:{overflowY:"scroll",maxHeight:600,padding:10}},{children:i.filter((function(e){return e.name.includes(a)})).map((function(i){return s.jsx("div",e.__assign({className:"col-lg-4"},{children:s.jsx(B,{rank:i,onChanges:function(){return c(d+1)}},void 0)}),i.id)}))}),void 0)}}),void 0)}),void 0)]}),void 0)}),{},void 0)),n.setURL("admin/users",s.jsx((function(){var a=t.useState(""),r=a[0],o=a[1],d=t.useState(0),c=d[0],l=d[1];function u(){l((function(e){return e+1}))}return n.createFetchHook(n.manageUsersService.getAll,c),s.jsxs(k,e.__assign({permission:"websiteManageUsers"},{children:[s.jsx("h2",{children:"Users"},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Filter By"},void 0),s.jsx("input",{className:"form-control",value:r,onChange:function(e){return o(e.target.value.toLowerCase())}},void 0)]},void 0),s.jsx(n.APIWrapper,e.__assign({promise:n.manageUsersService.getAll,params:c},{children:function(i){return s.jsxs("div",e.__assign({className:"row mt-5",style:{maxHeight:500,overflowY:"scroll"}},{children:[!i&&s.jsx(n.Icon,{className:"fa-spin",type:"spinner"},void 0),null==i?void 0:i.filter((function(e){return e.username.toLowerCase().includes(r)})).map((function(i){return s.jsx("div",e.__assign({className:"col-4"},{children:s.jsx(D,{user:i,onUpdated:u},void 0)}),i.id)}))]}),void 0)}}),void 0)]}),void 0)}),{},void 0));var L={config:d.exampleConfigDTO,showError:!1,showSpinner:!1},R=e.__assign(e.__assign({},L),{setConfig:function(e,s){},saveChanges:function(){return Promise.resolve()}}),E=t.createContext(R);function P(){var a=t.useContext(E),r=a.config,o=a.showSpinner,d=a.saveChanges,c=a.setConfig;return s.jsxs(n.Form,e.__assign({className:"",onSubmit:d},{children:[s.jsx("h2",{children:"Game Settings"},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Admin Habbo SWF"},void 0),s.jsx(n.Input,{type:"text",name:"swfAdminHabbo",onChange:c,value:r.swfAdminHabbo},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Habbo SWF"},void 0),s.jsx(n.Input,{type:"text",name:"swfHabbo",onChange:c,value:r.swfHabbo},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"SWF Folder"},void 0),s.jsx(n.Input,{type:"text",name:"swfBaseURL",onChange:c,value:r.swfBaseURL},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"External Variables"},void 0),s.jsx(n.Input,{type:"text",name:"swfExternalVariables",onChange:c,value:r.swfExternalVariables},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"External Flash Texts"},void 0),s.jsx(n.Input,{type:"text",name:"swfExternalTexts",onChange:c,value:r.swfExternalTexts},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Product Data"},void 0),s.jsx(n.Input,{type:"text",name:"swfProductData",onChange:c,value:r.swfProductData},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Furnidata"},void 0),s.jsx(n.Input,{type:"text",name:"swfFurniData",onChange:c,value:r.swfFurniData},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Figuredata"},void 0),s.jsx(n.Input,{type:"text",name:"swfFigureData",onChange:c,value:r.swfFigureData},void 0)]},void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:" "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-primary",disabled:o},{children:o?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)}function G(){var a=t.useContext(E),r=a.config,o=a.showSpinner,d=a.setConfig,c=a.saveChanges;return s.jsxs(n.Form,e.__assign({className:"",onSubmit:c},{children:[s.jsx("h2",{children:"Server Settings"},void 0),s.jsxs(i.FormGroup,{children:[s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Emulator IP"},void 0),s.jsx(n.Input,{type:"text",name:"emulatorIP",onChange:d,value:r.emulatorIP},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Emulator Port"},void 0),s.jsx(n.Input,{type:"text",name:"emulatorPort",onChange:d,value:r.emulatorPort},void 0)]}),void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Enable Web Sockets"},void 0),s.jsx(m.default,{checked:r.websocketEnabled,onChange:function(e){return d("websocketEnabled",e.target.checked)}},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Web Socket Server"},void 0),s.jsx(n.Input,{type:"text",name:"websocketIP",onChange:d,value:r.websocketIP},void 0)]}),void 0),s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Web Socket Port"},void 0),s.jsx(n.Input,{type:"text",name:"websocketPort",onChange:d,value:r.websocketPort},void 0)]}),void 0)]},void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:" "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-primary",disabled:o},{children:o?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)}function U(){var a=t.useContext(E),r=a.config,o=a.showSpinner,d=a.setConfig,c=a.saveChanges;return s.jsxs(n.Form,e.__assign({className:"",onSubmit:c},{children:[s.jsx("h2",{children:"Site Preferences"},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Site Name"},void 0),s.jsx(n.Input,{type:"text",name:"siteName",onChange:d,value:r.siteName},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Site URL"},void 0),s.jsx(n.Input,{type:"text",name:"siteLink",onChange:d,value:r.siteLink},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Beta Mode"},void 0),s.jsx(m.default,{checked:r.siteBeta,onChange:function(e){return d("siteBeta",e.target.checked)}},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Badge Folder"},void 0),s.jsx(n.Input,{type:"text",name:"swfBadgeURL",onChange:d,value:r.swfBadgeURL},void 0)]},void 0),s.jsxs(i.FormGroup,{children:[s.jsx("h4",{children:"Group Badge Folder"},void 0),s.jsx(n.Input,{type:"text",name:"groupBadgeURL",onChange:d,value:r.groupBadgeURL},void 0)]},void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:" "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-primary",disabled:o},{children:o?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)}function T(i){var r=i.children,o=n.useFetchFullConfig(),d=t.useState(L),c=d[0],l=d[1];if(t.useEffect((function(){void 0!==o&&l((function(s){return e.__assign(e.__assign({},s),{config:o})}))}),[o]),void 0===o)return s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0);var u=E.Provider;return s.jsxs(u,e.__assign({value:e.__assign(e.__assign({},c),{setConfig:function(s,i){l((function(n){var a;return e.__assign(e.__assign({},n),{config:e.__assign(e.__assign({},n.config),(a={},a[s]=i,a))})}))},saveChanges:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(s){switch(s.label){case 0:l((function(s){return e.__assign(e.__assign({},s),{showError:!1,showSpinner:!0})})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.configService.updateConfig(c.config)];case 2:return s.sent(),a.toast.success("Website settings have been updated"),l((function(s){return e.__assign(e.__assign({},s),{showSpinner:!1})})),[3,4];case 3:return s.sent(),l((function(s){return e.__assign(e.__assign({},s),{showError:!0,showSpinner:!1})})),[3,4];case 4:return[2]}}))}))}})},{children:[c.showError&&s.jsxs("div",e.__assign({className:"alert alert-danger"},{children:[s.jsx("i",{className:"fa fa-exclamation-triangle mr-2"},void 0),s.jsx("span",{children:"Your changes could not be saved"},void 0)]}),void 0),r]}),void 0)}function H(){var a=t.useContext(E),r=a.config,o=a.showSpinner,d=a.setConfig,c=a.saveChanges;return s.jsxs(n.Form,e.__assign({className:"",onSubmit:c},{children:[s.jsx("h2",{children:"Recaptcha Settings"},void 0),s.jsx(i.FormGroup,{children:s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Captcha Client Key"},void 0),s.jsx(n.Input,{type:"text",name:"googleRecaptchaClientKey",onChange:d,value:r.googleRecaptchaClientKey},void 0)]}),void 0)},void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:" "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-primary",disabled:o},{children:o?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)}function W(){var a=t.useContext(E),r=a.config,o=a.showSpinner,d=a.setConfig,c=a.saveChanges;return s.jsxs(n.Form,e.__assign({className:"",onSubmit:c},{children:[s.jsx("h2",{children:"Email Settings"},void 0),s.jsx(i.FormGroup,{children:s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"SendGrid API Key"},void 0),s.jsx(n.Input,{type:"text",name:"sendGridAPIKey",onChange:d,value:r.sendGridAPIKey},void 0)]}),void 0)},void 0),s.jsx(i.FormGroup,{children:s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"Email Address"},void 0),s.jsx(n.Input,{type:"text",name:"sendGridAPISender",onChange:d,value:r.sendGridAPISender},void 0)]}),void 0)},void 0),s.jsx(i.FormGroup,e.__assign({className:"mt-2"},{children:s.jsxs("div",e.__assign({className:"mt-3",style:{padding:2}},{children:[s.jsx("h4",{children:"SendGrid Forgot Password Template"},void 0),s.jsx(n.Input,{type:"text",name:"sendGridForgotPasswordTemplate",onChange:d,value:r.sendGridForgotPasswordTemplate},void 0)]}),void 0)}),void 0),s.jsxs(n.Row,e.__assign({className:"mt-3"},{children:[s.jsx("div",e.__assign({className:"col-6"},{children:" "}),void 0),s.jsx("div",e.__assign({className:"col-6 text-right"},{children:s.jsx("button",e.__assign({className:"btn btn-primary",disabled:o},{children:o?s.jsx("i",{className:"fa fa-spinner fa-spin"},void 0):"Save"}),void 0)}),void 0)]}),void 0)]}),void 0)}n.setURL("admin/website",s.jsx((function(){return s.jsxs(n.AdminLayout,e.__assign({permission:"websiteShowAdminPanel"},{children:[s.jsx(n.Jumbotron,e.__assign({style:{background:"#263238"},title:"Website Settings"},{children:s.jsx("p",{children:"Here you can update your website and update your SWFs, maintenance, etc."},void 0)}),void 0),s.jsx(n.Container,{children:s.jsx(T,{children:s.jsx(n.NavTabs,{tabs:[{text:s.jsx(n.Icon,{type:"wrench"},void 0),children:s.jsx(U,{},void 0)},{text:s.jsx(n.Icon,{type:"server"},void 0),children:s.jsx(G,{},void 0)},{text:s.jsx(n.Icon,{type:"gamepad"},void 0),children:s.jsx(P,{},void 0)},{text:s.jsx(n.Icon,{type:"robot"},void 0),children:s.jsx(H,{},void 0)},{text:s.jsx(n.Icon,{type:"envelope-open"},void 0),children:s.jsx(W,{},void 0)}]},void 0)},void 0)},void 0)]}),void 0)}),{},void 0));
