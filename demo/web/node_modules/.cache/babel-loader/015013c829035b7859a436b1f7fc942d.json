{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Form,Icon,Input,Row,sessionService}from'@instinct-prj/frontend';import{defaultSecurityPreferencesState}from'./';export function SecurityPreferences(){var _useState=useState(defaultSecurityPreferencesState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var isDisabled=state.currentPassword===''||state.newPassword===''||state.newPassword!==state.newPasswordAgain||state.showSpinner;function updateField(key,value){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},key,value)));}function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(function(_){return _objectSpread(_objectSpread({},_),{},{showError:false,showSpinner:true});});_context.prev=1;_context.next=4;return sessionService.updatePassword(state.currentPassword,state.newPassword,state.newPasswordAgain);case 4:updateField('showCompletion',true);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);setState(function(_){return _objectSpread(_objectSpread({},_),{},{showError:true,showSpinner:false});});case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return _onSubmit.apply(this,arguments);}if(state.showCompletion){return/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-thumbs-up fa-5x\"}),/*#__PURE__*/React.createElement(\"p\",null,\"Your password has been updated!\"));}return/*#__PURE__*/React.createElement(Form,{className:\"\",onSubmit:onSubmit},state.showError&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},/*#__PURE__*/React.createElement(\"h4\",null,\"There was a problem changing your password\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",{className:\"form-subcategory\"},\"Current Password\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"column-2\"},/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"currentPassword\",placeholder:\"Enter your current password\",value:state.currentPassword,onChange:updateField})))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"form-subcategory\"},\"New Password\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"column-2\"},/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"newPassword\",placeholder:\"Enter your new password\",value:state.newPassword,onChange:updateField})),/*#__PURE__*/React.createElement(\"div\",{className:\"column-2\"},/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"newPasswordAgain\",placeholder:\"Enter your new password again\",value:state.newPasswordAgain,onChange:updateField})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-help\"},/*#__PURE__*/React.createElement(\"p\",null,\"You must use at least 6 characters. We also recommend you to combine numbers and symbols for strong password protection.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"submit-button\"},/*#__PURE__*/React.createElement(\"button\",{className:\"rounded-button grey\",disabled:isDisabled,type:\"submit\"},state.showSpinner?/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"}):'Save')));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct/packages/frontend/themes/src/modern/pages/home/preferences/tabs/security/Security.tsx"],"names":["React","useState","Form","Icon","Input","Row","sessionService","defaultSecurityPreferencesState","SecurityPreferences","state","setState","isDisabled","currentPassword","newPassword","newPasswordAgain","showSpinner","updateField","key","value","onSubmit","_","showError","updatePassword","showCompletion"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {Form, Icon, Input, Row, sessionService} from '@instinct-prj/frontend';\nimport {defaultSecurityPreferencesState, SecurityPreferencesState} from './';\n\nexport function SecurityPreferences() {\n  const [state, setState] = useState<SecurityPreferencesState>(\n    defaultSecurityPreferencesState\n  );\n\n  const isDisabled: boolean =\n    state.currentPassword === '' ||\n    state.newPassword === '' ||\n    state.newPassword !== state.newPasswordAgain ||\n    state.showSpinner;\n\n  function updateField<K extends keyof SecurityPreferencesState>(\n    key: K,\n    value: SecurityPreferencesState[K]\n  ): void {\n    setState({\n      ...state,\n      [key]: value,\n    });\n  }\n  async function onSubmit(): Promise<void> {\n    setState(_ => ({\n      ..._,\n      showError: false,\n      showSpinner: true,\n    }));\n\n    try {\n      await sessionService.updatePassword(\n        state.currentPassword,\n        state.newPassword,\n        state.newPasswordAgain\n      );\n      updateField('showCompletion', true);\n    } catch {\n      setState(_ => ({\n        ..._,\n        showError: true,\n        showSpinner: false,\n      }));\n    }\n  }\n\n  if (state.showCompletion) {\n    return (\n      <div className=\"text-center\">\n        <i className=\"fa fa-thumbs-up fa-5x\" />\n        <p>Your password has been updated!</p>\n      </div>\n    );\n  }\n\n  return (\n    <Form className=\"\" onSubmit={onSubmit}>\n      {state.showError && (\n        <div className=\"alert alert-danger\">\n          <h4>There was a problem changing your password</h4>\n        </div>\n      )}\n      <div>\n        <h4 className=\"form-subcategory\">Current Password</h4>\n        <Row>\n          <div className=\"column-2\">\n            <Input\n              type=\"password\"\n              name=\"currentPassword\"\n              placeholder=\"Enter your current password\"\n              value={state.currentPassword}\n              onChange={updateField}\n            />\n          </div>\n        </Row>\n      </div>\n      <div className=\"mt-5\">\n        <h4 className=\"form-subcategory\">New Password</h4>\n        <Row>\n          <div className=\"column-2\">\n            <Input\n              type=\"password\"\n              name=\"newPassword\"\n              placeholder=\"Enter your new password\"\n              value={state.newPassword}\n              onChange={updateField}\n            />\n          </div>\n          <div className=\"column-2\">\n            <Input\n              type=\"password\"\n              name=\"newPasswordAgain\"\n              placeholder=\"Enter your new password again\"\n              value={state.newPasswordAgain}\n              onChange={updateField}\n            />\n          </div>\n        </Row>\n      </div>\n      <div className=\"form-help\">\n        <p>\n          You must use at least 6 characters. We also recommend you to combine\n          numbers and symbols for strong password protection.\n        </p>\n      </div>\n      <div className=\"submit-button\">\n        <button\n          className=\"rounded-button grey\"\n          disabled={isDisabled}\n          type=\"submit\"\n        >\n          {state.showSpinner ? (\n            <Icon className=\"fa-spin\" type=\"spinner\" />\n          ) : (\n            'Save'\n          )}\n        </button>\n      </div>\n    </Form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}