{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{toast}from'react-toastify';import React,{useState}from'react';import{UsersLayout}from'../UsersLayout';import{betaCodeService,Icon,setURL,useFetchBetaCodes}from'@instinct-prj/frontend';setURL('admin/users/beta-codes',/*#__PURE__*/React.createElement(BetaCodes,null));export function BetaCodes(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),refresh=_useState2[0],setRefresh=_useState2[1];var betaCodes=useFetchBetaCodes(refresh);function createBetaCode(){return _createBetaCode.apply(this,arguments);}function _createBetaCode(){_createBetaCode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return betaCodeService.create();case 3:setRefresh(function(_){return _+1;});toast.success('A new beta code has been generated');_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);toast.error('A beta code could not be generated at this time');case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _createBetaCode.apply(this,arguments);}function deletaBetaCode(_x){return _deletaBetaCode.apply(this,arguments);}function _deletaBetaCode(){_deletaBetaCode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(code){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return betaCodeService.delete(code);case 3:setRefresh(function(_){return _+1;});toast.success('Beta code has been deleted');_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);toast.error(\"Beta code \".concat(code,\" could not be deleted at this time\"));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return _deletaBetaCode.apply(this,arguments);}return/*#__PURE__*/React.createElement(UsersLayout,{permission:\"websiteManageBetaCodes\"},/*#__PURE__*/React.createElement(\"div\",{style:{padding:5}},/*#__PURE__*/React.createElement(\"h2\",{className:\"aside-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"div\",null,\"Beta Codes\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:createBetaCode},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus-square mr-2\"}),\"New\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"alert-warning p-3\"},/*#__PURE__*/React.createElement(\"b\",null,\"Warning:\"),/*#__PURE__*/React.createElement(\"p\",null,\"Deleting a beta code will revoke access for the redeeming user, if any..\")),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Beta Code\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Redeemed By\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"\\xA0\"))),/*#__PURE__*/React.createElement(\"tbody\",null,betaCodes===null||betaCodes===void 0?void 0:betaCodes.map(function(_){var _$user;return/*#__PURE__*/React.createElement(\"tr\",{key:_.code},/*#__PURE__*/React.createElement(\"th\",null,_.code),/*#__PURE__*/React.createElement(\"td\",null,(_$user=_.user)===null||_$user===void 0?void 0:_$user.username),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{style:{cursor:'pointer'},onClick:function onClick(){return deletaBetaCode(_.code);}},/*#__PURE__*/React.createElement(Icon,{className:\"text-danger\",type:\"trash-alt\"}))));})))));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct/packages/frontend/admin/src/users/beta-codes/BetaCodes.tsx"],"names":["toast","React","useState","UsersLayout","betaCodeService","Icon","setURL","useFetchBetaCodes","BetaCodes","refresh","setRefresh","betaCodes","createBetaCode","create","_","success","error","deletaBetaCode","code","delete","padding","map","user","username","cursor"],"mappings":"kcAAA,OAAQA,KAAR,KAAoB,gBAApB,CACA,MAAOC,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAAQC,WAAR,KAA0B,gBAA1B,CACA,OACEC,eADF,CAEEC,IAFF,CAGEC,MAHF,CAIEC,iBAJF,KAKO,wBALP,CAOAD,MAAM,CAAC,wBAAD,cAA2B,oBAAC,SAAD,MAA3B,CAAN,CAEA,MAAO,SAASE,CAAAA,SAAT,EAAqB,eACIN,QAAQ,CAAC,CAAD,CADZ,wCACnBO,OADmB,eACVC,UADU,eAG1B,GAAMC,CAAAA,SAAS,CAAGJ,iBAAiB,CAACE,OAAD,CAAnC,CAH0B,QAKXG,CAAAA,cALW,oJAK1B,yKAEUR,CAAAA,eAAe,CAACS,MAAhB,EAFV,QAGIH,UAAU,CAAC,SAAAI,CAAC,QAAIA,CAAAA,CAAC,CAAG,CAAR,EAAF,CAAV,CACAd,KAAK,CAACe,OAAN,CAAc,oCAAd,EAJJ,+EAMIf,KAAK,CAACgB,KAAN,CAAY,iDAAZ,EANJ,oEAL0B,yDAeXC,CAAAA,cAfW,sJAe1B,kBAA8BC,IAA9B,8JAEUd,CAAAA,eAAe,CAACe,MAAhB,CAAuBD,IAAvB,CAFV,QAGIR,UAAU,CAAC,SAAAI,CAAC,QAAIA,CAAAA,CAAC,CAAG,CAAR,EAAF,CAAV,CACAd,KAAK,CAACe,OAAN,CAAc,4BAAd,EAJJ,mFAMIf,KAAK,CAACgB,KAAN,qBAAyBE,IAAzB,wCANJ,sEAf0B,iDAyB1B,mBACE,oBAAC,WAAD,EAAa,UAAU,CAAC,wBAAxB,eACE,2BAAK,KAAK,CAAE,CAACE,OAAO,CAAE,CAAV,CAAZ,eACE,0BAAI,SAAS,CAAC,aAAd,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,4CADF,CADF,cAIE,2BAAK,SAAS,CAAC,kBAAf,eACE,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAER,cAA7C,eACE,yBAAG,SAAS,CAAC,wBAAb,EADF,OADF,CAJF,CADF,CADF,cAcE,2BAAK,SAAS,CAAC,mBAAf,eACE,wCADF,cAEE,wGAFF,CAdF,cAqBE,6BAAO,SAAS,CAAC,OAAjB,eACE,8CACE,2CACE,0BAAI,KAAK,CAAC,KAAV,cADF,cAEE,0BAAI,KAAK,CAAC,KAAV,gBAFF,cAGE,0BAAI,KAAK,CAAC,KAAV,SAHF,CADF,CADF,cAQE,iCACGD,SADH,SACGA,SADH,iBACGA,SAAS,CAAEU,GAAX,CAAe,SAAAP,CAAC,gCACf,0BAAI,GAAG,CAAEA,CAAC,CAACI,IAAX,eACE,8BAAKJ,CAAC,CAACI,IAAP,CADF,cAEE,sCAAKJ,CAAC,CAACQ,IAAP,iCAAK,OAAQC,QAAb,CAFF,cAGE,2CACE,2BACE,KAAK,CAAE,CAACC,MAAM,CAAE,SAAT,CADT,CAEE,OAAO,CAAE,yBAAMP,CAAAA,cAAc,CAACH,CAAC,CAACI,IAAH,CAApB,EAFX,eAIE,oBAAC,IAAD,EAAM,SAAS,CAAC,aAAhB,CAA8B,IAAI,CAAC,WAAnC,EAJF,CADF,CAHF,CADe,EAAhB,CADH,CARF,CArBF,CADF,CADF,CAmDD","sourcesContent":["import {toast} from 'react-toastify';\nimport React, {useState} from 'react';\nimport {UsersLayout} from '../UsersLayout';\nimport {\n  betaCodeService,\n  Icon,\n  setURL,\n  useFetchBetaCodes,\n} from '@instinct-prj/frontend';\n\nsetURL('admin/users/beta-codes', <BetaCodes />);\n\nexport function BetaCodes() {\n  const [refresh, setRefresh] = useState(0);\n\n  const betaCodes = useFetchBetaCodes(refresh);\n\n  async function createBetaCode() {\n    try {\n      await betaCodeService.create();\n      setRefresh(_ => _ + 1);\n      toast.success('A new beta code has been generated');\n    } catch {\n      toast.error('A beta code could not be generated at this time');\n    }\n  }\n\n  async function deletaBetaCode(code: string) {\n    try {\n      await betaCodeService.delete(code);\n      setRefresh(_ => _ + 1);\n      toast.success('Beta code has been deleted');\n    } catch {\n      toast.error(`Beta code ${code} could not be deleted at this time`);\n    }\n  }\n\n  return (\n    <UsersLayout permission=\"websiteManageBetaCodes\">\n      <div style={{padding: 5}}>\n        <h2 className=\"aside-title\">\n          <div className=\"row\">\n            <div className=\"col-6\">\n              <div>Beta Codes</div>\n            </div>\n            <div className=\"col-6 text-right\">\n              <button className=\"btn btn-success\" onClick={createBetaCode}>\n                <i className=\"fa fa-plus-square mr-2\" />\n                New\n              </button>\n            </div>\n          </div>\n        </h2>\n        <div className=\"alert-warning p-3\">\n          <b>Warning:</b>\n          <p>\n            Deleting a beta code will revoke access for the redeeming user, if\n            any..\n          </p>\n        </div>\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Beta Code</th>\n              <th scope=\"col\">Redeemed By</th>\n              <th scope=\"col\">&nbsp;</th>\n            </tr>\n          </thead>\n          <tbody>\n            {betaCodes?.map(_ => (\n              <tr key={_.code}>\n                <th>{_.code}</th>\n                <td>{_.user?.username}</td>\n                <td>\n                  <div\n                    style={{cursor: 'pointer'}}\n                    onClick={() => deletaBetaCode(_.code)}\n                  >\n                    <Icon className=\"text-danger\" type=\"trash-alt\" />\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </UsersLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}