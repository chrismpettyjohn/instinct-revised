{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Toggle from'react-toggle';import React,{useContext,useState}from'react';import{Modal,ModalBody,ModalHeader}from'reactstrap';import{configContext,Form,Input,Row}from'@instinct-prj/frontend';import{defaultRankEditorState,defaultRankDTO}from'./RankEditor.types';export function RankEditor(_ref){var children=_ref.children,_ref$defaultRank=_ref.defaultRank,defaultRank=_ref$defaultRank===void 0?defaultRankDTO:_ref$defaultRank,onSave=_ref.onSave;var _useContext=useContext(configContext),config=_useContext.config;var _useState=useState(_objectSpread(_objectSpread({},defaultRankEditorState),{},{rank:defaultRank})),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];function setValue(key,value){setState(function(_){return _objectSpread(_objectSpread({},_),{},_defineProperty({},key,value));});}function setRank(key,value){setState(function(_){return _objectSpread(_objectSpread({},_),{},{rank:_objectSpread(_objectSpread({},_.rank),{},_defineProperty({},key,value))});});}function toggleModal(){setState(function(_){return _objectSpread(_objectSpread({},_),{},{showModal:!_.showModal});});}function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setValue('showSpinner',true);_context.prev=1;_context.next=4;return onSave(state.rank);case 4:setValue('showSpinner',false);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);setState(function(_){return _objectSpread(_objectSpread({},_),{},{showError:true,showSpinner:false});});case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return _onSubmit.apply(this,arguments);}var permissionKeyToWord={websiteAdminClient:'Admin Client',websiteCreateBusiness:'Personal Business',websiteShowStaff:'Show as Staff',websiteShowAdminPanel:'Use Admin Panel',websiteManageEmulator:'Manage Emulator',websiteManageNews:'Manage ListArticles',websiteManageRanks:'Manage Ranks',websiteManageUsers:'Manage Users',websiteManageBans:'Manage Bans',websiteManageConfig:'Manage Config',websiteManageBusiness:'Manage Businesses',websiteManageBetaCodes:'Manage Beta Codes',websiteManageGuestbook:'Manage Guestbook',accRoomCreator:'Create Rooms'};var permissionIndexes=Object.keys(permissionKeyToWord);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{onClick:toggleModal},children),/*#__PURE__*/React.createElement(Modal,{isOpen:state.showModal,toggle:toggleModal},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleModal},\"Rank Editor\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Form,{className:\"\",onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\",style:{padding:2}},/*#__PURE__*/React.createElement(\"h4\",null,\"Name\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"name\",onChange:setRank,value:state.rank.name})),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3 row\",style:{padding:2}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-8\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Badge\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"badge\",onChange:setRank,value:state.rank.badge})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{style:{background:'#001726',borderRadius:'50%',marginTop:30,padding:5,height:45,width:45,textAlign:'center'}},/*#__PURE__*/React.createElement(\"img\",{alt:\"rank badge\",src:\"\".concat(config.swfBadgeURL,\"/\").concat(state.rank.badge,\".gif\")})))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\",style:{padding:2}},/*#__PURE__*/React.createElement(\"h4\",null,\"Permissions\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},permissionIndexes.map(function(permission){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6\",key:permission},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(Toggle,{checked:state.rank[permission],onChange:function onChange(){return setRank(permission,!state.rank[permission]);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-10 text-right\"},permissionKeyToWord[permission])));}))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"\\xA0 \"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",disabled:state.showSpinner},state.showSpinner?/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-spinner fa-spin\"}):'Save')))))));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct/packages/frontend/admin/src/users/ranks/rank-editor/RankEditor.tsx"],"names":["Toggle","React","useContext","useState","Modal","ModalBody","ModalHeader","configContext","Form","Input","Row","defaultRankEditorState","defaultRankDTO","RankEditor","children","defaultRank","onSave","config","rank","state","setState","setValue","key","value","_","setRank","toggleModal","showModal","onSubmit","showError","showSpinner","permissionKeyToWord","websiteAdminClient","websiteCreateBusiness","websiteShowStaff","websiteShowAdminPanel","websiteManageEmulator","websiteManageNews","websiteManageRanks","websiteManageUsers","websiteManageBans","websiteManageConfig","websiteManageBusiness","websiteManageBetaCodes","websiteManageGuestbook","accRoomCreator","permissionIndexes","Object","keys","padding","name","badge","background","borderRadius","marginTop","height","width","textAlign","swfBadgeURL","map","permission"],"mappings":"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","sourcesContent":["import Toggle from 'react-toggle';\nimport React, {useContext, useState} from 'react';\nimport {Permissions, RankDTO} from '@instinct-prj/interface';\nimport {Modal, ModalBody, ModalHeader} from 'reactstrap';\nimport {configContext, Form, Input, Row} from '@instinct-prj/frontend';\nimport {\n  defaultRankEditorState,\n  RankEditorState,\n  RankEditorProps,\n  defaultRankDTO,\n} from './RankEditor.types';\n\nexport function RankEditor({\n  children,\n  defaultRank = defaultRankDTO,\n  onSave,\n}: RankEditorProps) {\n  const {config} = useContext(configContext);\n  const [state, setState] = useState<RankEditorState>({\n    ...defaultRankEditorState,\n    rank: defaultRank,\n  });\n\n  function setValue<K extends keyof RankEditorState>(\n    key: K,\n    value: RankEditorState[K]\n  ): void {\n    setState(_ => ({\n      ..._,\n      [key]: value,\n    }));\n  }\n\n  function setRank<K extends keyof RankDTO>(key: K, value: RankDTO[K]): void {\n    setState(_ => ({\n      ..._,\n      rank: {\n        ..._.rank,\n        [key]: value,\n      },\n    }));\n  }\n\n  function toggleModal(): void {\n    setState(_ => ({\n      ..._,\n      showModal: !_.showModal,\n    }));\n  }\n\n  async function onSubmit() {\n    setValue('showSpinner', true);\n\n    try {\n      await onSave(state.rank);\n      setValue('showSpinner', false);\n    } catch {\n      setState(_ => ({\n        ..._,\n        showError: true,\n        showSpinner: false,\n      }));\n    }\n  }\n\n  const permissionKeyToWord: Record<keyof Permissions, string> = {\n    websiteAdminClient: 'Admin Client',\n    websiteCreateBusiness: 'Personal Business',\n    websiteShowStaff: 'Show as Staff',\n    websiteShowAdminPanel: 'Use Admin Panel',\n    websiteManageEmulator: 'Manage Emulator',\n    websiteManageNews: 'Manage ListArticles',\n    websiteManageRanks: 'Manage Ranks',\n    websiteManageUsers: 'Manage Users',\n    websiteManageBans: 'Manage Bans',\n    websiteManageConfig: 'Manage Config',\n    websiteManageBusiness: 'Manage Businesses',\n    websiteManageBetaCodes: 'Manage Beta Codes',\n    websiteManageGuestbook: 'Manage Guestbook',\n    accRoomCreator: 'Create Rooms',\n  };\n\n  const permissionIndexes: Array<keyof Permissions> = Object.keys(\n    permissionKeyToWord\n  ) as any;\n\n  return (\n    <>\n      <div onClick={toggleModal}>{children}</div>\n      <Modal isOpen={state.showModal} toggle={toggleModal}>\n        <ModalHeader toggle={toggleModal}>Rank Editor</ModalHeader>\n        <ModalBody>\n          <Form className=\"\" onSubmit={onSubmit}>\n            <div className=\"mt-3\" style={{padding: 2}}>\n              <h4>Name</h4>\n              <Input\n                type=\"text\"\n                name=\"name\"\n                onChange={setRank}\n                value={state.rank.name}\n              />\n            </div>\n            <div className=\"mt-3 row\" style={{padding: 2}}>\n              <div className=\"col-8\">\n                <h4>Badge</h4>\n                <Input\n                  type=\"text\"\n                  name=\"badge\"\n                  onChange={setRank}\n                  value={state.rank.badge}\n                />\n              </div>\n              <div className=\"col-4\">\n                <div\n                  style={{\n                    background: '#001726',\n                    borderRadius: '50%',\n                    marginTop: 30,\n                    padding: 5,\n                    height: 45,\n                    width: 45,\n                    textAlign: 'center',\n                  }}\n                >\n                  <img\n                    alt=\"rank badge\"\n                    src={`${config.swfBadgeURL}/${state.rank.badge}.gif`}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"mt-3\" style={{padding: 2}}>\n              <h4>Permissions</h4>\n              <div className=\"row\">\n                {permissionIndexes.map(permission => (\n                  <div className=\"col-lg-6\" key={permission}>\n                    <div className=\"row\">\n                      <div className=\"col-2\">\n                        <Toggle\n                          checked={state.rank[permission]}\n                          onChange={() =>\n                            setRank(permission, !state.rank[permission])\n                          }\n                        />\n                      </div>\n                      <div className=\"col-10 text-right\">\n                        {permissionKeyToWord[permission]}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <Row className=\"mt-3\">\n              <div className=\"col-6\">&nbsp; </div>\n              <div className=\"col-6 text-right\">\n                <button\n                  className=\"btn btn-success\"\n                  disabled={state.showSpinner}\n                >\n                  {state.showSpinner ? (\n                    <i className=\"fa fa-spinner fa-spin\" />\n                  ) : (\n                    'Save'\n                  )}\n                </button>\n              </div>\n            </Row>\n          </Form>\n        </ModalBody>\n      </Modal>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}