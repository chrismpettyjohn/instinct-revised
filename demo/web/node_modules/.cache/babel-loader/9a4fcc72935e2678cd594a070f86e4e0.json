{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Icon}from'../icon';import{APIError}from'../error/APIError';import React,{useEffect,useState}from'react';import{RenderError}from'../error/RenderError';export function APIWrapper(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setState(undefined);_context.next=4;return props.promise(props.params);case 4:data=_context.sent;setState(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setError(true);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _fetchData.apply(this,arguments);}fetchData();},[props.params]);if(error){return/*#__PURE__*/React.createElement(APIError,null);}if(!state){return/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"});}try{return props.children(state);}catch(_unused){return/*#__PURE__*/React.createElement(RenderError,null);}}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct-revised/packages/frontend/frontend/src/components/generic/api-wrapper/APIWrapper.tsx"],"names":["Icon","APIError","React","useEffect","useState","RenderError","APIWrapper","props","state","setState","error","setError","fetchData","undefined","promise","params","data","children"],"mappings":"0dAAA,OAAQA,IAAR,KAAmB,SAAnB,CACA,OAAQC,QAAR,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,WAAR,KAA0B,sBAA1B,CAGA,MAAO,SAASC,CAAAA,UAAT,CAA0BC,KAA1B,CAA6D,eACxCH,QAAQ,EADgC,wCAC3DI,KAD2D,eACpDC,QADoD,8BAExCL,QAAQ,CAAC,KAAD,CAFgC,yCAE3DM,KAF2D,eAEpDC,QAFoD,eAIlER,SAAS,CAAC,UAAM,SACCS,CAAAA,SADD,qIACd,4JAEIH,QAAQ,CAACI,SAAD,CAAR,CAFJ,sBAGuBN,CAAAA,KAAK,CAACO,OAAN,CAAcP,KAAK,CAACQ,MAApB,CAHvB,QAGUC,IAHV,eAIIP,QAAQ,CAACO,IAAD,CAAR,CAJJ,+EAMIL,QAAQ,CAAC,IAAD,CAAR,CANJ,oEADc,4CAUdC,SAAS,GACV,CAXQ,CAWN,CAACL,KAAK,CAACQ,MAAP,CAXM,CAAT,CAaA,GAAIL,KAAJ,CAAW,CACT,mBAAO,oBAAC,QAAD,MAAP,CACD,CAED,GAAI,CAACF,KAAL,CAAY,CACV,mBAAO,oBAAC,IAAD,EAAM,SAAS,CAAC,SAAhB,CAA0B,IAAI,CAAC,SAA/B,EAAP,CACD,CAED,GAAI,CACF,MAAOD,CAAAA,KAAK,CAACU,QAAN,CAAeT,KAAf,CAAP,CACD,CAAC,cAAM,CACN,mBAAO,oBAAC,WAAD,MAAP,CACD,CACF","sourcesContent":["import {Icon} from '../icon';\nimport {APIError} from '../error/APIError';\nimport React, {useEffect, useState} from 'react';\nimport {RenderError} from '../error/RenderError';\nimport {APIWrapperProps} from './APIWrapper.types';\n\nexport function APIWrapper<I, O>(props: APIWrapperProps<I, O>): any {\n  const [state, setState] = useState<O>();\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setState(undefined);\n        const data = await props.promise(props.params);\n        setState(data);\n      } catch (e) {\n        setError(true);\n      }\n    }\n    fetchData();\n  }, [props.params]);\n\n  if (error) {\n    return <APIError />;\n  }\n\n  if (!state) {\n    return <Icon className=\"fa-spin\" type=\"spinner\" />;\n  }\n\n  try {\n    return props.children(state!);\n  } catch {\n    return <RenderError />;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}