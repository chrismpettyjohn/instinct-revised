{"ast":null,"code":"import { useContext } from 'react';\nimport { useLocation } from 'wouter';\nimport { sessionContext } from '../../../context/session';\nexport function PermissionGuard({\n  children,\n  permission,\n  redirect = true\n}) {\n  var _user$rank;\n\n  const [location, setLocation] = useLocation();\n  const {\n    user\n  } = useContext(sessionContext);\n  const hasPermission = !!(user === null || user === void 0 ? void 0 : (_user$rank = user.rank) === null || _user$rank === void 0 ? void 0 : _user$rank.permissions[permission]);\n\n  if (!hasPermission) {\n    if (redirect) {\n      setLocation(user ? '/me' : '/login');\n    }\n\n    return null;\n  }\n\n  return children;\n}","map":null,"metadata":{},"sourceType":"module"}