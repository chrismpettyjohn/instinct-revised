{"ast":null,"code":"import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext}from'react';import{useLocation}from'wouter';import{sessionContext}from'../../../context/session';export function PermissionGuard(_ref){var _user$rank;var children=_ref.children,permission=_ref.permission,_ref$redirect=_ref.redirect,redirect=_ref$redirect===void 0?true:_ref$redirect;var _useLocation=useLocation(),_useLocation2=_slicedToArray(_useLocation,2),location=_useLocation2[0],setLocation=_useLocation2[1];var _useContext=useContext(sessionContext),user=_useContext.user;var hasPermission=!!(user===null||user===void 0?void 0:(_user$rank=user.rank)===null||_user$rank===void 0?void 0:_user$rank.permissions[permission]);if(!hasPermission){if(redirect){setLocation(user?'/home':'/login');}return null;}return children;}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct/packages/frontend/frontend/src/components/guard/permission/PermissionGuard.tsx"],"names":["useContext","useLocation","sessionContext","PermissionGuard","children","permission","redirect","location","setLocation","user","hasPermission","rank","permissions"],"mappings":"uJAAA,OAAQA,UAAR,KAAyB,OAAzB,CACA,OAAQC,WAAR,KAA0B,QAA1B,CAEA,OAAQC,cAAR,KAA6B,0BAA7B,CAEA,MAAO,SAASC,CAAAA,eAAT,MAIkB,mBAHvBC,CAAAA,QAGuB,MAHvBA,QAGuB,CAFvBC,UAEuB,MAFvBA,UAEuB,oBADvBC,QACuB,CADvBA,QACuB,wBADZ,IACY,gCACSL,WAAW,EADpB,8CAChBM,QADgB,kBACNC,WADM,kCAERR,UAAU,CAACE,cAAD,CAFF,CAEhBO,IAFgB,aAEhBA,IAFgB,CAGvB,GAAMC,CAAAA,aAAa,CAAG,CAAC,EAACD,IAAD,SAACA,IAAD,6BAACA,IAAI,CAAEE,IAAP,qCAAC,WAAYC,WAAZ,CAAwBP,UAAxB,CAAD,CAAvB,CAEA,GAAI,CAACK,aAAL,CAAoB,CAClB,GAAIJ,QAAJ,CAAc,CACZE,WAAW,CAACC,IAAI,CAAG,OAAH,CAAa,QAAlB,CAAX,CACD,CAED,MAAO,KAAP,CACD,CAED,MAAOL,CAAAA,QAAP,CACD","sourcesContent":["import {useContext} from 'react';\nimport {useLocation} from 'wouter';\nimport {PermissionGuardProps} from './';\nimport {sessionContext} from '../../../context/session';\n\nexport function PermissionGuard({\n  children,\n  permission,\n  redirect = true,\n}: PermissionGuardProps) {\n  const [location, setLocation] = useLocation();\n  const {user} = useContext(sessionContext);\n  const hasPermission = !!user?.rank?.permissions[permission];\n\n  if (!hasPermission) {\n    if (redirect) {\n      setLocation(user ? '/home' : '/login');\n    }\n\n    return null;\n  }\n\n  return children;\n}\n"]},"metadata":{},"sourceType":"module"}