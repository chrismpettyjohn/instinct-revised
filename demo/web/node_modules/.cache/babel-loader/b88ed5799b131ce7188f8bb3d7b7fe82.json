{"ast":null,"code":"import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./ListArticles.scss';import Moment from'moment';import{Link}from'wouter';import{uniqBy}from'lodash';import React,{useContext,useState}from'react';import{Card,configContext,MiniJumbotron,setURL,Row,Container,useFetchAllArticles,Icon,UserLayout}from'@instinct-prj/frontend';setURL('community/news',/*#__PURE__*/React.createElement(ListArticles,null));export function ListArticles(){var _useContext=useContext(configContext),config=_useContext.config;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState({callback:function callback(_){return true;}}),_useState6=_slicedToArray(_useState5,2),filter=_useState6[0],setFilter=_useState6[1];var articles=useFetchAllArticles();var filteredArticles=articles===null||articles===void 0?void 0:articles.filter(filter.callback);var categories=articles===undefined?[]:uniqBy(articles.map(function(_){return _.category;}),'id');function filterByCategory(categoryID){setFilter({callback:category===categoryID?function(_){return true;}:function(_){var _$category;return(_===null||_===void 0?void 0:(_$category=_.category)===null||_$category===void 0?void 0:_$category.id)===categoryID;}});setCategory(category===categoryID?undefined:categoryID);setName('');}function filterByTitle(name){setFilter({callback:function callback(_){return(_===null||_===void 0?void 0:_.title.toLowerCase().indexOf(name))>-1;}});setName(name);setCategory(undefined);}return/*#__PURE__*/React.createElement(UserLayout,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MiniJumbotron,null,/*#__PURE__*/React.createElement(\"h1\",null,config.siteName,\" News\"),/*#__PURE__*/React.createElement(\"p\",null,\"Check out the latest updates, events and announcements.\")))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MiniJumbotron,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",placeholder:\"Search for an article\",value:name,onChange:function onChange(e){return filterByTitle(e.target.value.toLowerCase());}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},categories.map(function(_){return/*#__PURE__*/React.createElement(\"button\",{className:\"btn ml-2\",key:_.id,style:{borderColor:category===_.id?_.color:'#0F416C',color:_.color},onClick:function onClick(){return filterByCategory(_.id);}},_.name);})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"hotel-news row\"},filteredArticles===null||filteredArticles===void 0?void 0:filteredArticles.map(function(_){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\",key:_.id},/*#__PURE__*/React.createElement(Link,{to:\"/community/news/\".concat(_.id)},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,{style:{borderBottom:\"2px solid \".concat(_.category.color),cursor:'pointer'}},/*#__PURE__*/React.createElement(\"div\",{className:\"article-content\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:_.thumbnailImage,className:\"article-image\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"article-title\"},_.title),/*#__PURE__*/React.createElement(\"div\",{className:\"article-body\"},\"Posted\",' ',/*#__PURE__*/React.createElement(\"span\",null,Moment(_.datePosted).format('MMMM DD, YYYY'))),/*#__PURE__*/React.createElement(\"p\",null,_.description)))))));}),articles&&(articles===null||articles===void 0?void 0:articles.length)===0&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Card,{className:\"text-center\"},/*#__PURE__*/React.createElement(Icon,{className:\"fa-4x\",type:\"exclamation-triangle\"}),/*#__PURE__*/React.createElement(\"p\",null,\"No articles have been posted yet.\"))),articles&&(articles===null||articles===void 0?void 0:articles.length)>0&&(filteredArticles===null||filteredArticles===void 0?void 0:filteredArticles.length)===0&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Card,{className:\"text-center\"},/*#__PURE__*/React.createElement(Icon,{className:\"fa-4x\",type:\"exclamation-triangle\"}),/*#__PURE__*/React.createElement(\"p\",null,\"We couldn't find any articles that fit the criteria!\"))))));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct/packages/frontend/modern-theme/src/pages/community/news/list-articles/ListArticles.tsx"],"names":["Moment","Link","uniqBy","React","useContext","useState","Card","configContext","MiniJumbotron","setURL","Row","Container","useFetchAllArticles","Icon","UserLayout","ListArticles","config","name","setName","category","setCategory","callback","_","filter","setFilter","articles","filteredArticles","categories","undefined","map","filterByCategory","categoryID","id","filterByTitle","title","toLowerCase","indexOf","siteName","e","target","value","borderColor","color","borderBottom","cursor","thumbnailImage","datePosted","format","description","length"],"mappings":"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","sourcesContent":["import './ListArticles.scss';\nimport Moment from 'moment';\nimport {Link} from 'wouter';\nimport {uniqBy} from 'lodash';\nimport {Article} from '@instinct-prj/interface';\nimport React, {useContext, useState} from 'react';\nimport {\n  Card,\n  configContext,\n  MiniJumbotron,\n  setURL,\n  Row,\n  Container,\n  useFetchAllArticles,\n  Icon,\n  UserLayout,\n} from '@instinct-prj/frontend';\n\ntype NewsFilter = (article: Article) => boolean;\n\nsetURL('community/news', <ListArticles />);\n\nexport function ListArticles() {\n  const {config} = useContext(configContext);\n  const [name, setName] = useState('');\n  const [category, setCategory] = useState<Number>();\n  const [filter, setFilter] = useState<{callback: NewsFilter}>({\n    callback: (_: Article) => true,\n  });\n  const articles: Article[] | undefined = useFetchAllArticles();\n  const filteredArticles = articles?.filter(filter.callback);\n\n  const categories =\n    articles === undefined\n      ? []\n      : uniqBy(\n          articles.map(_ => _.category),\n          'id'\n        );\n\n  function filterByCategory(categoryID: number) {\n    setFilter({\n      callback:\n        category === categoryID\n          ? (_: Article) => true\n          : (_: Article) => _?.category?.id === categoryID,\n    });\n    setCategory(category === categoryID ? undefined : categoryID);\n    setName('');\n  }\n\n  function filterByTitle(name: string) {\n    setFilter({\n      callback: (_: Article) => _?.title.toLowerCase().indexOf(name) > -1,\n    });\n    setName(name);\n    setCategory(undefined);\n  }\n\n  return (\n    <UserLayout>\n      <Container>\n        <Row>\n          <div className=\"col-12\">\n            <MiniJumbotron>\n              <h1>{config.siteName} News</h1>\n              <p>Check out the latest updates, events and announcements.</p>\n            </MiniJumbotron>\n          </div>\n        </Row>\n        <Row>\n          <div className=\"col-12\">\n            <MiniJumbotron>\n              <div className=\"row\">\n                <div className=\"col-6\">\n                  <input\n                    className=\"form-control\"\n                    placeholder=\"Search for an article\"\n                    value={name}\n                    onChange={e => filterByTitle(e.target.value.toLowerCase())}\n                  />\n                </div>\n                <div className=\"col-6\">\n                  {categories.map(_ => (\n                    <button\n                      className=\"btn ml-2\"\n                      key={_.id}\n                      style={{\n                        borderColor: category === _.id ? _.color : '#0F416C',\n                        color: _.color,\n                      }}\n                      onClick={() => filterByCategory(_.id)}\n                    >\n                      {_.name}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </MiniJumbotron>\n          </div>\n        </Row>\n        <div className=\"hotel-news row\">\n          {filteredArticles?.map(_ => (\n            <div className=\"col-6 mb-4\" key={_.id}>\n              <Link to={`/community/news/${_.id}`}>\n                <div>\n                  <Card\n                    style={{\n                      borderBottom: `2px solid ${_.category.color}`,\n                      cursor: 'pointer',\n                    }}\n                  >\n                    <div className=\"article-content\">\n                      <img\n                        alt=\"\"\n                        src={_.thumbnailImage}\n                        className=\"article-image\"\n                      />\n                      <div className=\"ml-4\">\n                        <div className=\"article-title\">{_.title}</div>\n                        <div className=\"article-body\">\n                          Posted{' '}\n                          <span>\n                            {Moment(_.datePosted).format('MMMM DD, YYYY')}\n                          </span>\n                        </div>\n                        <p>{_.description}</p>\n                      </div>\n                    </div>\n                  </Card>\n                </div>\n              </Link>\n            </div>\n          ))}\n          {articles && articles?.length === 0 && (\n            <div className=\"col-12\">\n              <Card className=\"text-center\">\n                <Icon className=\"fa-4x\" type=\"exclamation-triangle\" />\n                <p>No articles have been posted yet.</p>\n              </Card>\n            </div>\n          )}\n          {articles && articles?.length > 0 && filteredArticles?.length === 0 && (\n            <div className=\"col-12\">\n              <Card className=\"text-center\">\n                <Icon className=\"fa-4x\" type=\"exclamation-triangle\" />\n                <p>We couldn't find any articles that fit the criteria!</p>\n              </Card>\n            </div>\n          )}\n        </div>\n      </Container>\n    </UserLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}