{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{defaultProfilePreferencesState}from'./Profile.types';import{Form,Icon,Input,Row,sessionContext,sessionService}from'@instinct-prj/frontend';export function ProfilePreferences(){var _useContext=useContext(sessionContext),user=_useContext.user;var _useState=useState(_objectSpread(_objectSpread({},defaultProfilePreferencesState),{},{favoriteYoutubeVideo:user.favoriteYoutubeVideo})),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];function updateField(key,value){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},key,value)));}function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(function(_){return _objectSpread(_objectSpread({},_),{},{showError:false,showSpinner:true});});_context.prev=1;_context.next=4;return sessionService.updateProfile(state.favoriteYoutubeVideo);case 4:updateField('showCompletion',true);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);setState(function(_){return _objectSpread(_objectSpread({},_),{},{showError:true,showSpinner:false});});case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return _onSubmit.apply(this,arguments);}if(state.showCompletion){return/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-thumbs-up fa-5x\"}),/*#__PURE__*/React.createElement(\"p\",null,\"Your profile has been updated!\"));}return/*#__PURE__*/React.createElement(Form,{className:\"\",onSubmit:onSubmit},state.showError&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\"},/*#__PURE__*/React.createElement(\"h4\",null,\"There was a problem updating your profile\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",{className:\"form-subcategory\"},\"Youtube Video\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"column-2\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"favoriteYoutubeVideo\",value:state.favoriteYoutubeVideo,onChange:updateField})))),/*#__PURE__*/React.createElement(\"div\",{className:\"submit-button\"},/*#__PURE__*/React.createElement(\"button\",{className:\"rounded-button grey\",type:\"submit\"},state.showSpinner?/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"}):'Save')));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct/packages/frontend/modern-theme/src/pages/home/preferences/tabs/profile/Profile.tsx"],"names":["React","useContext","useState","defaultProfilePreferencesState","Form","Icon","Input","Row","sessionContext","sessionService","ProfilePreferences","user","favoriteYoutubeVideo","state","setState","updateField","key","value","onSubmit","_","showError","showSpinner","updateProfile","showCompletion"],"mappings":"ivBAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,QAA3B,KAA0C,OAA1C,CACA,OACEC,8BADF,KAGO,iBAHP,CAIA,OACEC,IADF,CAEEC,IAFF,CAGEC,KAHF,CAIEC,GAJF,CAKEC,cALF,CAMEC,cANF,KAOO,wBAPP,CASA,MAAO,SAASC,CAAAA,kBAAT,EAA8B,iBACpBT,UAAU,CAACO,cAAD,CADU,CAC5BG,IAD4B,aAC5BA,IAD4B,eAETT,QAAQ,gCAC7BC,8BAD6B,MAEhCS,oBAAoB,CAAED,IAAI,CAAEC,oBAFI,GAFC,wCAE5BC,KAF4B,eAErBC,QAFqB,eAOnC,QAASC,CAAAA,WAAT,CACEC,GADF,CAEEC,KAFF,CAGQ,CACNH,QAAQ,gCACHD,KADG,wBAELG,GAFK,CAECC,KAFD,GAAR,CAID,CAfkC,QAiBpBC,CAAAA,QAjBoB,kIAiBnC,mIACEJ,QAAQ,CAAC,SAAAK,CAAC,wCACLA,CADK,MAERC,SAAS,CAAE,KAFH,CAGRC,WAAW,CAAE,IAHL,IAAF,CAAR,CADF,sCAQUZ,CAAAA,cAAc,CAACa,aAAf,CAA6BT,KAAK,CAACD,oBAAnC,CARV,QASIG,WAAW,CAAC,gBAAD,CAAmB,IAAnB,CAAX,CATJ,+EAWID,QAAQ,CAAC,SAAAK,CAAC,wCACLA,CADK,MAERC,SAAS,CAAE,IAFH,CAGRC,WAAW,CAAE,KAHL,IAAF,CAAR,CAXJ,oEAjBmC,2CAoCnC,GAAIR,KAAK,CAACU,cAAV,CAA0B,CACxB,mBACE,2BAAK,SAAS,CAAC,aAAf,eACE,yBAAG,SAAS,CAAC,uBAAb,EADF,cAEE,8DAFF,CADF,CAMD,CAED,mBACE,oBAAC,IAAD,EAAM,SAAS,CAAC,EAAhB,CAAmB,QAAQ,CAAEL,QAA7B,EACGL,KAAK,CAACO,SAAN,eACC,2BAAK,SAAS,CAAC,oBAAf,eACE,0EADF,CAFJ,cAME,4CACE,0BAAI,SAAS,CAAC,kBAAd,kBADF,cAEE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,UAAf,eACE,oBAAC,KAAD,EACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,sBAFP,CAGE,KAAK,CAAEP,KAAK,CAACD,oBAHf,CAIE,QAAQ,CAAEG,WAJZ,EADF,CADF,CAFF,CANF,cAoBE,2BAAK,SAAS,CAAC,eAAf,eACE,8BAAQ,SAAS,CAAC,qBAAlB,CAAwC,IAAI,CAAC,QAA7C,EACGF,KAAK,CAACQ,WAAN,cACC,oBAAC,IAAD,EAAM,SAAS,CAAC,SAAhB,CAA0B,IAAI,CAAC,SAA/B,EADD,CAGC,MAJJ,CADF,CApBF,CADF,CAgCD","sourcesContent":["import React, {useContext, useState} from 'react';\nimport {\n  defaultProfilePreferencesState,\n  ProfilePreferencesState,\n} from './Profile.types';\nimport {\n  Form,\n  Icon,\n  Input,\n  Row,\n  sessionContext,\n  sessionService,\n} from '@instinct-prj/frontend';\n\nexport function ProfilePreferences() {\n  const {user} = useContext(sessionContext);\n  const [state, setState] = useState<ProfilePreferencesState>({\n    ...defaultProfilePreferencesState,\n    favoriteYoutubeVideo: user!.favoriteYoutubeVideo,\n  });\n\n  function updateField<K extends keyof ProfilePreferencesState>(\n    key: K,\n    value: ProfilePreferencesState[K]\n  ): void {\n    setState({\n      ...state,\n      [key]: value,\n    });\n  }\n\n  async function onSubmit(): Promise<void> {\n    setState(_ => ({\n      ..._,\n      showError: false,\n      showSpinner: true,\n    }));\n\n    try {\n      await sessionService.updateProfile(state.favoriteYoutubeVideo);\n      updateField('showCompletion', true);\n    } catch {\n      setState(_ => ({\n        ..._,\n        showError: true,\n        showSpinner: false,\n      }));\n    }\n  }\n\n  if (state.showCompletion) {\n    return (\n      <div className=\"text-center\">\n        <i className=\"fa fa-thumbs-up fa-5x\" />\n        <p>Your profile has been updated!</p>\n      </div>\n    );\n  }\n\n  return (\n    <Form className=\"\" onSubmit={onSubmit}>\n      {state.showError && (\n        <div className=\"alert alert-danger\">\n          <h4>There was a problem updating your profile</h4>\n        </div>\n      )}\n      <div>\n        <h4 className=\"form-subcategory\">Youtube Video</h4>\n        <Row>\n          <div className=\"column-2\">\n            <Input\n              type=\"text\"\n              name=\"favoriteYoutubeVideo\"\n              value={state.favoriteYoutubeVideo}\n              onChange={updateField}\n            />\n          </div>\n        </Row>\n      </div>\n\n      <div className=\"submit-button\">\n        <button className=\"rounded-button grey\" type=\"submit\">\n          {state.showSpinner ? (\n            <Icon className=\"fa-spin\" type=\"spinner\" />\n          ) : (\n            'Save'\n          )}\n        </button>\n      </div>\n    </Form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}