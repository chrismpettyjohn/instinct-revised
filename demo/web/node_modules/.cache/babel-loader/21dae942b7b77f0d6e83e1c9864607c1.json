{"ast":null,"code":"var _jsxFileName = \"/Users/cpettyjohn/Habbo/instinct-revised/packages/frontend/admin/src/website/context/WebsiteSettings.provider.tsx\";\nimport { toast } from 'react-toastify';\nimport { websiteSettingsContext } from './WebsiteSettings';\nimport React, { useEffect, useState } from 'react';\nimport { configService, useFetchFullConfig } from '@instinct-web/core';\nimport { defaultWebsiteSettingsContextState } from './WebsiteSettings.types';\nexport function WebsiteSettingsProvider({\n  children\n}) {\n  const defaultConfig = useFetchFullConfig();\n  const [state, setState] = useState(defaultWebsiteSettingsContextState);\n  useEffect(() => {\n    if (defaultConfig !== undefined) {\n      setState(_ => ({ ..._,\n        config: defaultConfig\n      }));\n    }\n  }, [defaultConfig]);\n\n  if (defaultConfig === undefined) {\n    return /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-spinner fa-spin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 12\n      }\n    });\n  }\n\n  function setConfig(key, value) {\n    setState(_ => ({ ..._,\n      config: { ..._.config,\n        [key]: value\n      }\n    }));\n  }\n\n  async function saveChanges() {\n    setState(_ => ({ ..._,\n      showError: false,\n      showSpinner: true\n    }));\n\n    try {\n      await configService.updateConfig(state.config);\n      toast.success('Website settings have been updated');\n      setState(_ => ({ ..._,\n        showSpinner: false\n      }));\n    } catch {\n      setState(_ => ({ ..._,\n        showError: true,\n        showSpinner: false\n      }));\n    }\n  }\n\n  const Provider = websiteSettingsContext.Provider;\n  return /*#__PURE__*/React.createElement(Provider, {\n    value: { ...state,\n      setConfig,\n      saveChanges\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, state.showError && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-exclamation-triangle mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"Your changes could not be saved\")), children);\n}","map":null,"metadata":{},"sourceType":"module"}