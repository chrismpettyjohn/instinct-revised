{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Link}from'wouter';import{FormGroup}from'reactstrap';import React,{useState}from'react';import{defaultForgotPasswordModalState,Form,Icon,GuestLayout,Input,sessionService,setURL}from'@instinct-prj/frontend';setURL('forgot-password',/*#__PURE__*/React.createElement(ForgotPassword,null));export function ForgotPassword(){var _useState=useState(defaultForgotPasswordModalState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setState(function(_){return _objectSpread(_objectSpread({},_),{},{showError:false,showSpinner:true});});_context.next=4;return sessionService.generateForgotPasswordToken(state.email);case 4:setState(function(_){return _objectSpread(_objectSpread({},_),{},{showCompletion:true});});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setState(function(_){return _objectSpread(_objectSpread({},_),{},{showError:true,showSpinner:false});});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(GuestLayout,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Forgot Password?\"),!state.showCompletion?/*#__PURE__*/React.createElement(Form,{className:\"\",disabled:state.showSpinner,onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"p\",null,\"Please enter your email address.\"),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Input,{type:\"email\",name:\"email\",value:state.email,onChange:function onChange(key,email){return setState(function(_){return _objectSpread(_objectSpread({},_),{},{email:email});});}})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(Link,{className:\"forgot-password\",to:\"/login\"},\"Back to Login\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",disabled:state.showSpinner},state.showSpinner?/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"}):/*#__PURE__*/React.createElement(React.Fragment,null,\"Reset Password\")))))):/*#__PURE__*/React.createElement(\"p\",null,\"Please check your inbox for an email containing your password reset link.\"));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct/packages/frontend/modern-theme/src/pages/auth/forgot-password/ForgotPassword.tsx"],"names":["Link","FormGroup","React","useState","defaultForgotPasswordModalState","Form","Icon","GuestLayout","Input","sessionService","setURL","ForgotPassword","state","setState","onSubmit","_","showError","showSpinner","generateForgotPasswordToken","email","showCompletion","key"],"mappings":"wlBAAA,OAAQA,IAAR,KAAmB,QAAnB,CACA,OAAQC,SAAR,KAAwB,YAAxB,CACA,MAAOC,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OACEC,+BADF,CAGEC,IAHF,CAIEC,IAJF,CAKEC,WALF,CAMEC,KANF,CAOEC,cAPF,CAQEC,MARF,KASO,wBATP,CAWAA,MAAM,CAAC,iBAAD,cAAoB,oBAAC,cAAD,MAApB,CAAN,CAEA,MAAO,SAASC,CAAAA,cAAT,EAA0B,eACLR,QAAQ,CAChCC,+BADgC,CADH,wCACxBQ,KADwB,eACjBC,QADiB,uBAKhBC,CAAAA,QALgB,kIAK/B,mJAEID,QAAQ,CAAC,SAAAE,CAAC,wCACLA,CADK,MAERC,SAAS,CAAE,KAFH,CAGRC,WAAW,CAAE,IAHL,IAAF,CAAR,CAFJ,sBAQUR,CAAAA,cAAc,CAACS,2BAAf,CAA2CN,KAAK,CAACO,KAAjD,CARV,QASIN,QAAQ,CAAC,SAAAE,CAAC,wCAASA,CAAT,MAAYK,cAAc,CAAE,IAA5B,IAAF,CAAR,CATJ,+EAWIP,QAAQ,CAAC,SAAAE,CAAC,wCACLA,CADK,MAERC,SAAS,CAAE,IAFH,CAGRC,WAAW,CAAE,KAHL,IAAF,CAAR,CAXJ,oEAL+B,2CAwB/B,mBACE,oBAAC,WAAD,mBACE,iDADF,CAEG,CAACL,KAAK,CAACQ,cAAP,cACC,oBAAC,IAAD,EAAM,SAAS,CAAC,EAAhB,CAAmB,QAAQ,CAAER,KAAK,CAACK,WAAnC,CAAgD,QAAQ,CAAEH,QAA1D,eACE,gEADF,cAEE,oBAAC,SAAD,mBACE,oBAAC,KAAD,EACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,OAFP,CAGE,KAAK,CAAEF,KAAK,CAACO,KAHf,CAIE,QAAQ,CAAE,kBAACE,GAAD,CAAMF,KAAN,QAAgBN,CAAAA,QAAQ,CAAC,SAAAE,CAAC,wCAASA,CAAT,MAAYI,KAAK,CAALA,KAAZ,IAAF,CAAxB,EAJZ,EADF,CAFF,cAUE,oBAAC,SAAD,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,IAAD,EAAM,SAAS,CAAC,iBAAhB,CAAkC,EAAE,CAAC,QAArC,kBADF,CADF,cAME,2BAAK,SAAS,CAAC,kBAAf,eACE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAEP,KAAK,CAACK,WAFlB,EAIGL,KAAK,CAACK,WAAN,cACC,oBAAC,IAAD,EAAM,SAAS,CAAC,SAAhB,CAA0B,IAAI,CAAC,SAA/B,EADD,cAGC,yDAPJ,CADF,CANF,CADF,CAVF,CADD,cAkCC,yGApCJ,CADF,CA4CD","sourcesContent":["import {Link} from 'wouter';\nimport {FormGroup} from 'reactstrap';\nimport React, {useState} from 'react';\nimport {\n  defaultForgotPasswordModalState,\n  ForgotPasswordModalState,\n  Form,\n  Icon,\n  GuestLayout,\n  Input,\n  sessionService,\n  setURL,\n} from '@instinct-prj/frontend';\n\nsetURL('forgot-password', <ForgotPassword />);\n\nexport function ForgotPassword() {\n  const [state, setState] = useState<ForgotPasswordModalState>(\n    defaultForgotPasswordModalState\n  );\n\n  async function onSubmit() {\n    try {\n      setState(_ => ({\n        ..._,\n        showError: false,\n        showSpinner: true,\n      }));\n\n      await sessionService.generateForgotPasswordToken(state.email);\n      setState(_ => ({..._, showCompletion: true}));\n    } catch {\n      setState(_ => ({\n        ..._,\n        showError: true,\n        showSpinner: false,\n      }));\n    }\n  }\n\n  return (\n    <GuestLayout>\n      <h1>Forgot Password?</h1>\n      {!state.showCompletion ? (\n        <Form className=\"\" disabled={state.showSpinner} onSubmit={onSubmit}>\n          <p>Please enter your email address.</p>\n          <FormGroup>\n            <Input\n              type=\"email\"\n              name=\"email\"\n              value={state.email}\n              onChange={(key, email) => setState(_ => ({..._, email}))}\n            />\n          </FormGroup>\n          <FormGroup>\n            <div className=\"row\">\n              <div className=\"col-6\">\n                <Link className=\"forgot-password\" to=\"/login\">\n                  Back to Login\n                </Link>\n              </div>\n              <div className=\"col-6 text-right\">\n                <button\n                  className=\"btn btn-success\"\n                  disabled={state.showSpinner}\n                >\n                  {state.showSpinner ? (\n                    <Icon className=\"fa-spin\" type=\"spinner\" />\n                  ) : (\n                    <>Reset Password</>\n                  )}\n                </button>\n              </div>\n            </div>\n          </FormGroup>\n        </Form>\n      ) : (\n        <p>\n          Please check your inbox for an email containing your password reset\n          link.\n        </p>\n      )}\n    </GuestLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}