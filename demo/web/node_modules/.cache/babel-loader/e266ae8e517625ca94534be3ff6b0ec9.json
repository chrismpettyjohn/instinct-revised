{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{articleService,Icon}from'@instinct-prj/frontend';import{Modal,ModalBody,ModalFooter,ModalHeader}from'reactstrap';export function CreateCommentModal(_ref){var article=_ref.article,onCreation=_ref.onCreation;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];function toggle(){setModal(function(_){return!_;});}function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var newComment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;setLoading(true);_context.next=5;return articleService.createComment(article.id,{content:comment});case 5:newComment=_context.sent;onCreation(newComment);setComment('');setModal(false);case 9:_context.prev=9;setLoading(false);return _context.finish(9);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,,9,12]]);}));return _onSubmit.apply(this,arguments);}var _ref2=isLoading?['spinner fa-spin','Posting Comment...']:['save','Post Comment'],_ref3=_slicedToArray(_ref2,2),buttonIcon=_ref3[0],buttonText=_ref3[1];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-dark\",onClick:toggle,type:\"button\"},\"Post Comment\"),isOpen&&/*#__PURE__*/React.createElement(Modal,{isOpen:true,toggle:toggle},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggle},\"Commenting on \",/*#__PURE__*/React.createElement(\"b\",null,article.title)),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"b\",null,\"What do you want to say?\"),/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}})))),/*#__PURE__*/React.createElement(ModalFooter,{className:\"text-right\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",disabled:isLoading,onClick:onSubmit},/*#__PURE__*/React.createElement(Icon,{type:buttonIcon}),buttonText))));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct-revised/packages/frontend/modern-theme/src/pages/community/news/view-article/create-comment-modal/CreateCommentModal.tsx"],"names":["React","useState","articleService","Icon","Modal","ModalBody","ModalFooter","ModalHeader","CreateCommentModal","article","onCreation","comment","setComment","isOpen","setModal","isLoading","setLoading","toggle","_","onSubmit","event","preventDefault","createComment","id","content","newComment","buttonIcon","buttonText","title","e","target","value"],"mappings":"0dAAA,MAAOA,CAAAA,KAAP,EAA+BC,QAA/B,KAA8C,OAA9C,CACA,OAAQC,cAAR,CAAwBC,IAAxB,KAAmC,wBAAnC,CAEA,OAAQC,KAAR,CAAeC,SAAf,CAA0BC,WAA1B,CAAuCC,WAAvC,KAAyD,YAAzD,CAEA,MAAO,SAASC,CAAAA,kBAAT,MAGqB,IAF1BC,CAAAA,OAE0B,MAF1BA,OAE0B,CAD1BC,UAC0B,MAD1BA,UAC0B,eACIT,QAAQ,CAAC,EAAD,CADZ,wCACnBU,OADmB,eACVC,UADU,8BAECX,QAAQ,CAAC,KAAD,CAFT,yCAEnBY,MAFmB,eAEXC,QAFW,8BAGMb,QAAQ,CAAC,KAAD,CAHd,yCAGnBc,SAHmB,eAGRC,UAHQ,eAK1B,QAASC,CAAAA,MAAT,EAAkB,CAChBH,QAAQ,CAAC,SAAAI,CAAC,QAAI,CAACA,CAAL,EAAF,CAAR,CACD,CAPyB,QASXC,CAAAA,QATW,oIAS1B,iBAAwBC,KAAxB,iIACEA,KAAK,CAACC,cAAN,GADF,gBAGIL,UAAU,CAAC,IAAD,CAAV,CAHJ,sBAI6Bd,CAAAA,cAAc,CAACoB,aAAf,CAA6Bb,OAAO,CAACc,EAArC,CAAyC,CAChEC,OAAO,CAAEb,OADuD,CAAzC,CAJ7B,QAIUc,UAJV,eAOIf,UAAU,CAACe,UAAD,CAAV,CACAb,UAAU,CAAC,EAAD,CAAV,CACAE,QAAQ,CAAC,KAAD,CAAR,CATJ,uBAWIE,UAAU,CAAC,KAAD,CAAV,CAXJ,kGAT0B,qDAwBOD,SAAS,CACtC,CAAC,iBAAD,CAAoB,oBAApB,CADsC,CAEtC,CAAC,MAAD,CAAS,cAAT,CA1BsB,+BAwBnBW,UAxBmB,UAwBPC,UAxBO,UA4B1B,mBACE,qDACE,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAEV,MAA1C,CAAkD,IAAI,CAAC,QAAvD,iBADF,CAIGJ,MAAM,eACL,oBAAC,KAAD,EAAO,MAAM,KAAb,CAAc,MAAM,CAAEI,MAAtB,eACE,oBAAC,WAAD,EAAa,MAAM,CAAEA,MAArB,gCACgB,6BAAIR,OAAO,CAACmB,KAAZ,CADhB,CADF,cAIE,oBAAC,SAAD,mBACE,4BAAM,QAAQ,CAAET,QAAhB,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,wDADF,cAEE,gCACE,SAAS,CAAC,cADZ,CAEE,KAAK,CAAER,OAFT,CAGE,QAAQ,CAAE,kBAAAkB,CAAC,QAAIjB,CAAAA,UAAU,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,EAHb,EAFF,CADF,CADF,CAJF,cAgBE,oBAAC,WAAD,EAAa,SAAS,CAAC,YAAvB,eACE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAEhB,SAFZ,CAGE,OAAO,CAAEI,QAHX,eAKE,oBAAC,IAAD,EAAM,IAAI,CAAEO,UAAZ,EALF,CAMGC,UANH,CADF,CAhBF,CALJ,CADF,CAoCD","sourcesContent":["import React, {SyntheticEvent, useState} from 'react';\nimport {articleService, Icon} from '@instinct-prj/frontend';\nimport {CreateCommentModalProps} from './CreateCommentModal.types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\n\nexport function CreateCommentModal({\n  article,\n  onCreation,\n}: CreateCommentModalProps) {\n  const [comment, setComment] = useState('');\n  const [isOpen, setModal] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n\n  function toggle() {\n    setModal(_ => !_);\n  }\n\n  async function onSubmit(event: SyntheticEvent) {\n    event.preventDefault();\n    try {\n      setLoading(true);\n      const newComment = await articleService.createComment(article.id, {\n        content: comment,\n      });\n      onCreation(newComment);\n      setComment('');\n      setModal(false);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const [buttonIcon, buttonText] = isLoading\n    ? ['spinner fa-spin', 'Posting Comment...']\n    : ['save', 'Post Comment'];\n\n  return (\n    <>\n      <button className=\"btn btn-dark\" onClick={toggle} type=\"button\">\n        Post Comment\n      </button>\n      {isOpen && (\n        <Modal isOpen toggle={toggle}>\n          <ModalHeader toggle={toggle}>\n            Commenting on <b>{article.title}</b>\n          </ModalHeader>\n          <ModalBody>\n            <form onSubmit={onSubmit}>\n              <div className=\"form-group\">\n                <b>What do you want to say?</b>\n                <textarea\n                  className=\"form-control\"\n                  value={comment}\n                  onChange={e => setComment(e.target.value)}\n                />\n              </div>\n            </form>\n          </ModalBody>\n          <ModalFooter className=\"text-right\">\n            <button\n              className=\"btn btn-success\"\n              disabled={isLoading}\n              onClick={onSubmit}\n            >\n              <Icon type={buttonIcon} />\n              {buttonText}\n            </button>\n          </ModalFooter>\n        </Modal>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}