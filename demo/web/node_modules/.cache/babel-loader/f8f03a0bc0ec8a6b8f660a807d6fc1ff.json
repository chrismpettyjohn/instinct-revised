{"ast":null,"code":"import _toConsumableArray from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cpettyjohn/Habbo/instinct-revised/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{FormGroup}from'reactstrap';import{toast}from'react-toastify';import React,{useEffect,useState}from'react';import{EmulatorLayout}from'../EmulatorLayout';import{emulatorService,Form,Icon,Input,setURL}from'@instinct-prj/frontend';setURL('admin/emulator/texts',/*#__PURE__*/React.createElement(EmulatorTexts,null));export function EmulatorTexts(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),spinner=_useState2[0],setSpinner=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),texts=_useState6[0],setTexts=_useState6[1];useEffect(function(){function fetchTexts(){return _fetchTexts.apply(this,arguments);}function _fetchTexts(){_fetchTexts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return emulatorService.getTexts();case 2:data=_context.sent;setTexts(data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchTexts.apply(this,arguments);}fetchTexts();},[]);function onChange(key,value){setTexts(function(_){var newTexts=_toConsumableArray(_);newTexts.find(function(_){return _.id===key;}).value=value;return newTexts;});}function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setSpinner(true);_context2.next=3;return emulatorService.updateTexts(texts.map(function(_){return{id:_.id,value:_.value};}));case 3:toast.info('Emulator Texts have been updated');setSpinner(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(EmulatorLayout,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"h2\",null,/*#__PURE__*/React.createElement(Icon,{type:\"wrench\"}),\"Emulator Texts\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Filter By\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",value:filter,onChange:function onChange(e){return setFilter(e.target.value.toLowerCase());}}))),/*#__PURE__*/React.createElement(Form,{className:\"mt-2\",onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"h3\",null,\"Server Options\"),!texts&&/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{maxHeight:500,overflowY:'scroll'}},texts===null||texts===void 0?void 0:texts.filter(function(_){return _.label.toLowerCase().includes(filter);}).map(function(_){return/*#__PURE__*/React.createElement(FormGroup,{className:\"col-6\",key:_.id},/*#__PURE__*/React.createElement(\"h4\",null,_.label),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:_.id,value:_.value,onChange:onChange}));})),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5 text-right\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",disabled:spinner,type:\"submit\"},spinner?/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"}):/*#__PURE__*/React.createElement(React.Fragment,null,\"Save\")))));}","map":{"version":3,"sources":["/Users/cpettyjohn/Habbo/instinct-revised/packages/frontend/admin/src/emulator/texts/EmulatorTexts.tsx"],"names":["FormGroup","toast","React","useEffect","useState","EmulatorLayout","emulatorService","Form","Icon","Input","setURL","EmulatorTexts","spinner","setSpinner","filter","setFilter","texts","setTexts","fetchTexts","getTexts","data","onChange","key","value","_","newTexts","find","id","onSubmit","updateTexts","map","info","e","target","toLowerCase","maxHeight","overflowY","label","includes"],"mappings":"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","sourcesContent":["import {FormGroup} from 'reactstrap';\nimport {toast} from 'react-toastify';\nimport React, {useEffect, useState} from 'react';\nimport {EmulatorLayout} from '../EmulatorLayout';\nimport {EmulatorTexts as EmulatorTextsI} from '@instinct-prj/interface';\nimport {\n  emulatorService,\n  Form,\n  Icon,\n  Input,\n  setURL,\n} from '@instinct-prj/frontend';\n\nsetURL('admin/emulator/texts', <EmulatorTexts />);\n\nexport function EmulatorTexts() {\n  const [spinner, setSpinner] = useState(false);\n  const [filter, setFilter] = useState('');\n  const [texts, setTexts] = useState<EmulatorTextsI>();\n\n  useEffect(() => {\n    async function fetchTexts() {\n      const data = await emulatorService.getTexts();\n      setTexts(data);\n    }\n    fetchTexts();\n  }, []);\n\n  function onChange(key: string, value: string) {\n    setTexts(_ => {\n      const newTexts = [..._!];\n      newTexts.find(_ => _.id === key)!.value = value;\n      return newTexts;\n    });\n  }\n\n  async function onSubmit() {\n    setSpinner(true);\n    await emulatorService.updateTexts(\n      texts!.map(_ => ({id: _.id, value: _.value}))\n    );\n    toast.info('Emulator Texts have been updated');\n    setSpinner(false);\n  }\n\n  return (\n    <EmulatorLayout>\n      <div className=\"row\">\n        <div className=\"col-6\">\n          <h2>\n            <Icon type=\"wrench\" />\n            Emulator Texts\n          </h2>\n        </div>\n        <div className=\"col-6\">\n          <h4>Filter By</h4>\n          <input\n            className=\"form-control\"\n            value={filter}\n            onChange={e => setFilter(e.target.value.toLowerCase())}\n          />\n        </div>\n      </div>\n      <Form className=\"mt-2\" onSubmit={onSubmit}>\n        <h3>Server Options</h3>\n        {!texts && <Icon className=\"fa-spin\" type=\"spinner\" />}\n        <div className=\"row\" style={{maxHeight: 500, overflowY: 'scroll'}}>\n          {texts\n            ?.filter(_ => _.label.toLowerCase().includes(filter))\n            .map(_ => (\n              <FormGroup className=\"col-6\" key={_.id}>\n                <h4>{_.label}</h4>\n                <Input\n                  type=\"text\"\n                  name={_.id}\n                  value={_.value}\n                  onChange={onChange}\n                />\n              </FormGroup>\n            ))}\n        </div>\n\n        <div className=\"mt-5 text-right\">\n          <button className=\"btn btn-success\" disabled={spinner} type=\"submit\">\n            {spinner ? <Icon className=\"fa-spin\" type=\"spinner\" /> : <>Save</>}\n          </button>\n        </div>\n      </Form>\n    </EmulatorLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}