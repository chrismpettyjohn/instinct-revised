{"ast":null,"code":"var _jsxFileName = \"/Users/cpettyjohn/Habbo/instinct/packages/frontend/frontend/src/components/template/login-modal/LoginModal.tsx\";\nimport { Form } from '../../generic/form';\nimport { useLocation, Link } from 'wouter';\nimport { Input } from '../../generic/form';\nimport { Icon } from '../../generic/icon';\nimport { Loading } from '../../generic/loading';\nimport React, { useContext, useState } from 'react';\nimport { sessionContext } from '../../../context/session';\nimport { sessionService } from '../../../services/session';\nimport { defaultLoginModalState } from './';\nimport { ModalButton } from '../../generic/modal/modal-button';\nexport function LoginModal() {\n  const [location, setLocation] = useLocation();\n  const {\n    setUser\n  } = useContext(sessionContext);\n  const [state, setState] = useState(defaultLoginModalState);\n\n  function setValue(key, value) {\n    setState(_ => ({ ..._,\n      error: key === 'showSpinner' ? _.error : undefined,\n      [key]: value\n    }));\n  }\n\n  async function tryLogin() {\n    try {\n      setValue('showSpinner', true);\n      const bearer = await sessionService.attemptCredentials(state.username, state.password);\n      const user = await sessionService.attemptBearerToken(bearer);\n      setUser(user);\n      setLocation('/home');\n    } catch (e) {\n      setValue('error', e.response.data.message[0]);\n      setValue('showSpinner', false);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(ModalButton, {\n    button: \"Login\",\n    className: \"text-white\",\n    header: \"Login to your account\",\n    style: {\n      background: 'transparent'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    isLoading: state.showSpinner,\n    text: \"Attempting to login...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"login-form\",\n    onSubmit: tryLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"username-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"username\",\n    className: state.error === 'invalid_username' ? 'invalid-input' : '',\n    placeholder: \"Username\",\n    value: state.username,\n    onChange: setValue,\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Icon, {\n    type: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"password-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    className: state.error === 'invalid_password' ? 'invalid-input' : '',\n    placeholder: \"Password\",\n    value: state.password,\n    onChange: setValue,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Icon, {\n    type: \"lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-2 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"text-warning\",\n    to: \"/forgot-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"Forgot your password?\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"rounded-button blue plain\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Log In\"))));\n}","map":null,"metadata":{},"sourceType":"module"}