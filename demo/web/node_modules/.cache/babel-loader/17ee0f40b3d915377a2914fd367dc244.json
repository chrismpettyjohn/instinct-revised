{"ast":null,"code":"var _jsxFileName = \"/Users/cpettyjohn/Habbo/instinct/packages/frontend/admin/src/users/bans/ban-editor/BanEditor.tsx\";\nimport { Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Avatar, Form, Row, sessionContext, userService, DatePicker } from '@instinct-prj/frontend';\nimport { defaultBanDTO, defaultBanEditorState } from './BanEditor.types';\nexport function BanEditor({\n  children,\n  defaultBan = defaultBanDTO,\n  onSave\n}) {\n  var _state$user;\n\n  const session = useContext(sessionContext);\n  const [username, setUsername] = useState('');\n  const [state, setState] = useState({ ...defaultBanEditorState,\n    ban: { ...defaultBan,\n      userID: session.user.id\n    }\n  });\n  useEffect(() => {\n    async function mergeUser(userID) {\n      const user = await userService.getByID(userID);\n      setUsername(user.username);\n    }\n\n    mergeUser(state.ban.userID);\n  }, [state.ban.userID]);\n  useEffect(() => {\n    async function fetchUser(userID) {\n      const user = await userService.getByID(userID);\n      setValue('user', user);\n    }\n\n    fetchUser(state.ban.userID);\n  }, [state.ban.userID]);\n  useEffect(() => {\n    async function fetchUser(username) {\n      const user = await userService.getByUsername(username);\n      setBan('userID', user.user.id);\n    }\n\n    fetchUser(username);\n  }, [username]);\n\n  function setValue(key, value) {\n    setState(_ => ({ ..._,\n      [key]: value\n    }));\n  }\n\n  function setBan(key, value) {\n    setState(_ => ({ ..._,\n      ban: { ..._.ban,\n        [key]: value\n      }\n    }));\n  }\n\n  function toggleModal() {\n    setState(_ => ({ ..._,\n      showModal: !_.showModal\n    }));\n  }\n\n  async function onSubmit() {\n    setValue('showSpinner', true);\n\n    try {\n      await onSave(state.ban);\n      setValue('showSpinner', false);\n    } catch {\n      setState(_ => ({ ..._,\n        showError: true,\n        showSpinner: false\n      }));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: toggleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, children), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: state.showModal,\n    toggle: toggleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, \"Ban Editor\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"mt-2\",\n    look: (_state$user = state.user) === null || _state$user === void 0 ? void 0 : _state$user.figure,\n    headOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, \"Reason\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    rows: 3,\n    value: state.ban.reason,\n    onChange: e => setBan('reason', e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, \"Start Date\"), /*#__PURE__*/React.createElement(DatePicker, {\n    defaultTimestamp: state.ban.banStart,\n    onChange: val => setBan('banStart', val),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, \"End Date\"), /*#__PURE__*/React.createElement(DatePicker, {\n    defaultTimestamp: state.ban.banEnd,\n    onChange: val => setBan('banEnd', val),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, \"\\xA0 \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    disabled: state.showSpinner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, state.showSpinner ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }) : 'Save')))))));\n}","map":null,"metadata":{},"sourceType":"module"}