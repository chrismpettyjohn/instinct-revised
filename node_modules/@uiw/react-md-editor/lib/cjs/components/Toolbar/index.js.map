{"version":3,"sources":["../../../../src/components/Toolbar/index.tsx"],"names":["Toolbar","props","prefixCls","commands","commandHelp","active","groupName","handleClick","command","name","onCommand","map","item","idx","keyCommand","liProps","activeBtn","value","childNode","children","close","execute","undefined","buttonProps","icon","React","createElement","type","disabled","preview","test","onClick","evn","stopPropagation","Array","isArray"],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { IProps } from '../../utils';\nimport { ICommand, ICommandChildHandleParam } from '../../commands';\nimport Child from './Child';\nimport './index.less';\n\nexport interface IToolbarProps extends IProps {\n  onCommand?: (command: ICommand<string>, groupName?: string) => void;\n  commands?: ICommand<string>[];\n  groupName?: string;\n  commandHelp?: ICommandChildHandleParam;\n  active?: {\n    [key: string]: any;\n  };\n}\n\nexport default function Toolbar(props: IToolbarProps = {}) {\n  const { prefixCls, commands = [], commandHelp = {}, active, groupName } = props;\n  function handleClick(command: ICommand<string>, name?: string) {\n    const { onCommand } = props;\n    onCommand && onCommand(command, groupName || name);\n  }\n  return (\n    <div className={`${prefixCls}-toolbar`}>\n      <ul>\n        {commands.map((item, idx) => {\n          if (item.keyCommand === 'divider') {\n            return <li key={idx} {...item.liProps} className={`${prefixCls}-toolbar-divider`} />;\n          }\n          if (!item.keyCommand) return;\n          const activeBtn =\n            active &&\n            (item.value ? active[item.keyCommand] && active[item.keyCommand] === item.value : active[item.keyCommand]);\n\n          const childNode =\n            typeof item.children === 'function'\n              ? item.children({\n                  close: () => handleClick({}, item.groupName),\n                  execute: () => handleClick({ execute: item.execute }),\n                  ...commandHelp,\n                })\n              : undefined;\n          return (\n            <li key={idx} {...item.liProps} className={classnames({ active: activeBtn })}>\n              {!item.buttonProps && item.icon}\n              {item.buttonProps &&\n                React.createElement(\n                  'button',\n                  {\n                    type: 'button',\n                    disabled:\n                      active &&\n                      active.preview &&\n                      active.preview === 'preview' &&\n                      !/(preview|fullscreen)/.test(item.keyCommand),\n                    'data-name': item.name,\n                    ...item.buttonProps,\n                    onClick: (evn: any) => {\n                      evn.stopPropagation();\n                      handleClick(item, item.groupName);\n                    },\n                  },\n                  item.icon,\n                )}\n              {item.children && (\n                <Child\n                  active={active}\n                  groupName={item.groupName}\n                  prefixCls={prefixCls}\n                  onCommand={props.onCommand}\n                  children={childNode}\n                  commands={\n                    Array.isArray(item.children) && typeof item.children !== 'function' ? item.children : undefined\n                  }\n                />\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n"]}