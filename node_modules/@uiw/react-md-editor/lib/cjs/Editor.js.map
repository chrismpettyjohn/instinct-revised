{"version":3,"sources":["../../src/Editor.tsx"],"names":["setGroupPopFalse","data","Object","keys","forEach","keyname","InternalMDEditor","props","ref","prefixCls","className","propsValue","value","commands","height","heightWarp","visiableDragbar","preview","previewType","isfullscreen","fullscreen","previewOptions","textareaProps","maxHeight","minHeight","autoFocus","tabSize","onChange","hideToolbar","other","setValue","setPreview","isFullscreen","setIsFullscreen","groupPop","setGroupPop","leftScroll","previewRef","React","createRef","setHeight","textarea","commandOrchestrator","selectionRange","count","scrollTop","cls","commandOrchestratorHandle","current","text","TextAreaCommandOrchestrator","handleTextAreaMount","isMount","warp","blur","focus","selectionStart","selectionEnd","scrollTo","modifySelectionRange","handleChange","event","target","handleCommand","command","groupName","keyCommand","document","body","style","overflow","executeCommand","handleScroll","e","mdp","previewDom","textareaDom","scale","scrollHeight","offsetHeight","chestratorObj","mdProps","onScroll","source","Number","getState","textApi","test","newHeight","MDEditor","forwardRef","Markdown","MarkdownPreview"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useMemo, useRef, useState } from 'react';\nimport classnames from 'classnames';\nimport MarkdownPreview, { MarkdownPreviewProps, MarkdownPreviewRef } from '@uiw/react-markdown-preview';\nimport { IProps } from './utils';\nimport TextArea, { ITextAreaProps, TextAreaRef } from './components/TextArea';\nimport Toolbar from './components/Toolbar';\nimport DragBar from './components/DragBar';\nimport { getCommands, TextAreaCommandOrchestrator, ICommand } from './commands';\nimport './index.less';\n\nexport type PreviewType = 'live' | 'edit' | 'preview';\n\nexport interface MDEditorProps extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onChange'>, IProps {\n  /**\n   * The Markdown value.\n   */\n  value?: string;\n  /**\n   * Event handler for the `onChange` event.\n   */\n  onChange?: (value?: string) => void;\n  /**\n   * Can be used to make `Markdown Editor` focus itself on initialization. Defaults to on.\n   * it will be set to true when either the source `textarea` is focused,\n   * or it has an `autofocus` attribute and no other element is focused.\n   */\n  autoFocus?: ITextAreaProps['autoFocus'];\n  /**\n   * The height of the editor.\n   */\n  height?: React.CSSProperties['height'];\n  /**\n   * Show drag and drop tool. Set the height of the editor.\n   */\n  visiableDragbar?: boolean;\n  /**\n   * Show markdown preview.\n   */\n  preview?: PreviewType;\n  fullscreen?: boolean;\n  /**\n   * Maximum drag height. `visiableDragbar=true`\n   */\n  maxHeight?: number;\n  /**\n   * Minimum drag height. `visiableDragbar=true`\n   */\n  minHeight?: number;\n  /**\n   * This is reset [react-markdown](https://github.com/rexxars/react-markdown) settings.\n   */\n  previewOptions?: Omit<MarkdownPreviewProps, 'source'>;\n  /**\n   * Set the `textarea` related props.\n   */\n  textareaProps?: ITextAreaProps;\n  /**\n   * The number of characters to insert when pressing tab key.\n   * Default `2` spaces.\n   */\n  tabSize?: number;\n  /**\n   * You can create your own commands or reuse existing commands.\n   */\n  commands?: ICommand[];\n  /**\n   * Hide the tool bar\n   */\n  hideToolbar?: boolean;\n}\n\nfunction setGroupPopFalse(data: Record<string, boolean>) {\n  Object.keys(data).forEach((keyname) => {\n    data[keyname] = false;\n  });\n  return data;\n}\n\nconst InternalMDEditor = (\n  props: MDEditorProps,\n  ref?: ((instance: HTMLDivElement) => void) | React.RefObject<HTMLDivElement | null> | null,\n) => {\n  const {\n    prefixCls = 'w-md-editor',\n    className,\n    value: propsValue,\n    commands = getCommands(),\n    height: heightWarp = 200,\n    visiableDragbar = true,\n    preview: previewType = 'live',\n    fullscreen: isfullscreen,\n    previewOptions,\n    textareaProps,\n    maxHeight = 1200,\n    minHeight = 100,\n    autoFocus,\n    tabSize = 2,\n    onChange,\n    hideToolbar,\n    ...other\n  } = props || {};\n  const [value, setValue] = useState<string>(propsValue || '');\n  const [preview, setPreview] = useState<PreviewType>(previewType);\n  const [isFullscreen, setIsFullscreen] = useState(isfullscreen || false);\n  const [groupPop, setGroupPop] = useState<Record<string, boolean>>({});\n\n  const leftScroll = useRef(false);\n  const previewRef = React.createRef<MarkdownPreviewRef>();\n\n  const [height, setHeight] = useState(heightWarp);\n  const textarea = React.createRef<TextAreaRef>();\n  const commandOrchestrator = useRef<TextAreaCommandOrchestrator>();\n  const selectionRange = useRef<{ count: number; scrollTop: number }>({ count: 0, scrollTop: 0 });\n\n  const cls = classnames(className, prefixCls, {\n    [`${prefixCls}-show-${preview}`]: preview,\n    [`${prefixCls}-fullscreen`]: isFullscreen,\n  });\n\n  const commandOrchestratorHandle = () => {\n    if (textarea.current && textarea.current.text) {\n      commandOrchestrator.current = new TextAreaCommandOrchestrator(\n        (textarea.current.text || null) as HTMLTextAreaElement,\n      );\n    }\n    return commandOrchestrator.current;\n  };\n\n  useMemo(() => preview !== props.preview && props.preview && setPreview(props.preview!), [props.preview]);\n  useMemo(() => value !== props.value && setValue(props.value!), [props.value]);\n  useMemo(() => height !== props.height && setHeight(heightWarp!), [heightWarp]);\n  function handleTextAreaMount(isMount: boolean) {\n    if (textarea.current && textarea.current.text && textarea.current.warp && isMount) {\n      textarea.current.text.blur();\n      textarea.current.text.focus();\n      textarea.current.text.selectionStart = selectionRange.current.count;\n      textarea.current.text.selectionEnd = selectionRange.current.count;\n      textarea.current.warp.scrollTo(0, selectionRange.current.scrollTop!);\n    }\n  }\n  function modifySelectionRange() {\n    if (textarea.current && textarea.current.text && textarea.current.warp) {\n      selectionRange.current.count = textarea.current.text.selectionStart;\n      selectionRange.current.scrollTop = textarea.current.warp.scrollTop;\n    }\n  }\n  function handleChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\n    modifySelectionRange();\n    setValue(event.target.value!);\n    onChange && onChange(event.target.value || '');\n  }\n  function handleCommand(command: ICommand, groupName?: string) {\n    commandOrchestratorHandle();\n    modifySelectionRange();\n    if (command.keyCommand === 'preview') {\n      setPreview(command.value as PreviewType);\n    }\n    if (command.keyCommand === 'fullscreen') {\n      setIsFullscreen(!isFullscreen);\n      document.body.style.overflow = isFullscreen ? 'initial' : 'hidden';\n    }\n    if (command.keyCommand === 'group') {\n      setGroupPop({ ...setGroupPopFalse(groupPop), [`${groupName}`]: true });\n    }\n    if (groupName && command.keyCommand !== 'group') {\n      setGroupPop({ ...groupPop, [`${groupName}`]: false });\n    }\n    commandOrchestrator.current && commandOrchestrator.current!.executeCommand(command);\n  }\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    if (!textarea.current || !previewRef.current || !previewRef.current.mdp.current || !textarea.current.warp) {\n      return;\n    }\n    const previewDom = previewRef.current.mdp.current;\n    const textareaDom = textarea.current.warp;\n    if (textareaDom && previewDom) {\n      const scale =\n        (textareaDom.scrollHeight - textareaDom.offsetHeight) / (previewDom.scrollHeight - previewDom.offsetHeight);\n      if (e.target === textareaDom && leftScroll.current) {\n        previewDom.scrollTop = textareaDom.scrollTop / scale;\n      }\n      if (e.target === previewDom && !leftScroll.current) {\n        textareaDom.scrollTop = previewDom.scrollTop * scale;\n      }\n    }\n  }\n  const chestratorObj = useMemo(() => commandOrchestratorHandle(), [textarea.current, commandOrchestrator.current]);\n  const mdProps = ({\n    ...previewOptions,\n    ref: previewRef,\n    onScroll: handleScroll,\n    source: value,\n  } as unknown) as MarkdownPreviewProps;\n  return (\n    <Fragment>\n      <div\n        className={cls}\n        onClick={() => setGroupPop({ ...setGroupPopFalse(groupPop) })}\n        style={{ height: isFullscreen ? '100%' : hideToolbar ? Number(height) - 29 : height }}\n        {...other}\n      >\n        {!hideToolbar && (\n          <Toolbar\n            active={{\n              fullscreen: isFullscreen,\n              preview: preview,\n              ...groupPop,\n            }}\n            prefixCls={prefixCls}\n            commands={commands}\n            commandHelp={{\n              getState: commandOrchestrator.current && commandOrchestrator.current!.getState,\n              textApi: commandOrchestrator.current && commandOrchestrator.current!.textApi,\n              ...chestratorObj,\n            }}\n            onCommand={handleCommand}\n          />\n        )}\n        <div\n          className={`${prefixCls}-content`}\n          style={{ height: isFullscreen ? 'calc(100% - 29px)' : Number(height) - 29 }}\n        >\n          {/(edit|live)/.test(preview as string) && (\n            <TextArea\n              ref={textarea}\n              tabSize={tabSize}\n              className={`${prefixCls}-input`}\n              prefixCls={prefixCls}\n              value={value}\n              autoFocus={autoFocus}\n              {...textareaProps}\n              onScroll={handleScroll}\n              onMouseOver={() => (leftScroll.current = true)}\n              onMouseLeave={() => (leftScroll.current = false)}\n              onMount={handleTextAreaMount}\n              onChange={handleChange}\n            />\n          )}\n          {/(live|preview)/.test(preview as string) && (\n            <MarkdownPreview {...mdProps} className={`${prefixCls}-preview`} />\n          )}\n        </div>\n        {visiableDragbar && !isFullscreen && (\n          <DragBar\n            prefixCls={prefixCls}\n            height={height as number}\n            maxHeight={maxHeight!}\n            minHeight={minHeight!}\n            onChange={(newHeight) => {\n              setHeight(newHeight);\n            }}\n          />\n        )}\n      </div>\n    </Fragment>\n  );\n};\n\nconst MDEditor = React.forwardRef<HTMLDivElement, MDEditorProps>(InternalMDEditor);\n\ntype MDEditor = typeof MDEditor & {\n  Markdown: typeof MarkdownPreview;\n};\n\n(MDEditor as MDEditor).Markdown = MarkdownPreview;\n\nexport default MDEditor as MDEditor;\n"]}